var rrweb=function(J){"use strict";var M;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(M||(M={}));function vt(e){return e.nodeType===e.ELEMENT_NODE}function xe(e){var t=e?.host;return Boolean(t?.shadowRoot===e)}var Ye=function(){function e(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return e.prototype.getId=function(t){var n;if(!t)return-1;var r=(n=this.getMeta(t))===null||n===void 0?void 0:n.id;return r??-1},e.prototype.getNode=function(t){return this.idNodeMap.get(t)||null},e.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},e.prototype.getMeta=function(t){return this.nodeMetaMap.get(t)||null},e.prototype.removeNodeFromMap=function(t){var n=this,r=this.getId(t);this.idNodeMap.delete(r),t.childNodes&&t.childNodes.forEach(function(o){return n.removeNodeFromMap(o)})},e.prototype.has=function(t){return this.idNodeMap.has(t)},e.prototype.hasNode=function(t){return this.nodeMetaMap.has(t)},e.prototype.add=function(t,n){var r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)},e.prototype.replace=function(t,n){this.idNodeMap.set(t,n)},e.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},e}();function bt(){return new Ye}function He(e){var t=e.maskInputOptions,n=e.tagName,r=e.type,o=e.value,i=e.maskInputFn,c=o||"";return(t[n.toLowerCase()]||t[r])&&(i?c=i(c):c="*".repeat(c.length)),c}var St="__rrweb_original__";function Un(e){var t=e.getContext("2d");if(!t)return!0;for(var n=50,r=0;r<e.width;r+=n)for(var o=0;o<e.height;o+=n){var i=t.getImageData,c=St in i?i[St]:i,a=new Uint32Array(c.call(t,r,o,Math.min(n,e.width-r),Math.min(n,e.height-o)).data.buffer);if(a.some(function(l){return l!==0}))return!1}return!0}var jn=1,Bn=new RegExp("[^a-z0-9-_:]"),De=-2;function Gn(){return jn++}function zn(e){if(e instanceof HTMLFormElement)return"form";var t=e.tagName.toLowerCase().trim();return Bn.test(t)?"div":t}function Xe(e){try{var t=e.rules||e.cssRules;return t?Array.from(t).map(Yn).join(""):null}catch{return null}}function Yn(e){var t=e.cssText;if(Hn(e))try{t=Xe(e.styleSheet)||t}catch{}return t}function Hn(e){return"styleSheet"in e}function Xn(e){return e.cssRules?Array.from(e.cssRules).map(function(t){return t.cssText||""}).join(""):""}function Zn(e){var t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}var ye,wt,Kn=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Qn=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,Jn=/^(data:)([^,]*),(.*)/i;function Pe(e,t){return(e||"").replace(Kn,function(n,r,o,i,c,a){var l=o||c||a,s=r||i||"";if(!l)return n;if(!Qn.test(l)||Jn.test(l))return"url(".concat(s).concat(l).concat(s,")");if(l[0]==="/")return"url(".concat(s).concat(Zn(t)+l).concat(s,")");var u=t.split("/"),d=l.split("/");u.pop();for(var m=0,h=d;m<h.length;m++){var f=h[m];f!=="."&&(f===".."?u.pop():u.push(f))}return"url(".concat(s).concat(u.join("/")).concat(s,")")})}var qn=/^[^ \t\n\r\u000c]+/,er=/^[, \t\n\r\u000c]+/;function tr(e,t){if(t.trim()==="")return t;var n=0;function r(s){var u,d=s.exec(t.substring(n));return d?(u=d[0],n+=u.length,u):""}for(var o=[];r(er),!(n>=t.length);){var i=r(qn);if(i.slice(-1)===",")i=We(e,i.substring(0,i.length-1)),o.push(i);else{var c="";i=We(e,i);for(var a=!1;;){var l=t.charAt(n);if(l===""){o.push((i+c).trim());break}else if(a)l===")"&&(a=!1);else if(l===","){n+=1,o.push((i+c).trim());break}else l==="("&&(a=!0);c+=l,n+=1}}}return o.join(", ")}function We(e,t){if(!t||t.trim()==="")return t;var n=e.createElement("a");return n.href=t,n.href}function nr(e){return Boolean(e.tagName==="svg"||e.ownerSVGElement)}function Ze(){var e=document.createElement("a");return e.href="",e.href}function Nt(e,t,n,r){return n==="src"||n==="href"&&r||n==="xlink:href"&&r&&r[0]!=="#"||n==="background"&&r&&(t==="table"||t==="td"||t==="th")?We(e,r):n==="srcset"&&r?tr(e,r):n==="style"&&r?Pe(r,Ze()):t==="object"&&n==="data"&&r?We(e,r):r}function rr(e,t,n){if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(var r=e.classList.length;r--;){var o=e.classList[r];if(t.test(o))return!0}return n?e.matches(n):!1}function $e(e,t,n){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return n?$e(e.parentNode,t,n):!1;for(var r=e.classList.length;r--;){var o=e.classList[r];if(t.test(o))return!0}return n?$e(e.parentNode,t,n):!1}function Tt(e,t,n){var r=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(r===null)return!1;if(typeof t=="string"){if(r.classList.contains(t)||r.closest(".".concat(t)))return!0}else if($e(r,t,!0))return!0;return!!(n&&(r.matches(n)||r.closest(n)))}function or(e,t,n){var r=e.contentWindow;if(r){var o=!1,i;try{i=r.document.readyState}catch{return}if(i!=="complete"){var c=setTimeout(function(){o||(t(),o=!0)},n);e.addEventListener("load",function(){clearTimeout(c),o=!0,t()});return}var a="about:blank";if(r.location.href!==a||e.src===a||e.src===""){setTimeout(t,0);return}e.addEventListener("load",t)}}function sr(e){return e.getAttribute("href")?e.sheet!==null:!0}function ir(e,t,n){var r=!1,o;try{o=e.sheet}catch{return}if(!o){var i=setTimeout(function(){r||(t(),r=!0)},n);e.addEventListener("load",function(){clearTimeout(i),r=!0,t()})}}function ar(e,t){var n=t.doc,r=t.mirror,o=t.blockClass,i=t.blockSelector,c=t.maskTextClass,a=t.maskTextSelector,l=t.inlineStylesheet,s=t.maskInputOptions,u=s===void 0?{}:s,d=t.maskTextFn,m=t.maskInputFn,h=t.dataURLOptions,f=h===void 0?{}:h,y=t.inlineImages,S=t.recordCanvas,p=t.keepIframeSrcFn,b=t.newlyAddedElement,v=b===void 0?!1:b,C=lr(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:M.Document,childNodes:[],compatMode:e.compatMode,rootId:C}:{type:M.Document,childNodes:[],rootId:C};case e.DOCUMENT_TYPE_NODE:return{type:M.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:C};case e.ELEMENT_NODE:return ur(e,{doc:n,blockClass:o,blockSelector:i,inlineStylesheet:l,maskInputOptions:u,maskInputFn:m,dataURLOptions:f,inlineImages:y,recordCanvas:S,keepIframeSrcFn:p,newlyAddedElement:v,rootId:C});case e.TEXT_NODE:return cr(e,{maskTextClass:c,maskTextSelector:a,maskTextFn:d,rootId:C});case e.CDATA_SECTION_NODE:return{type:M.CDATA,textContent:"",rootId:C};case e.COMMENT_NODE:return{type:M.Comment,textContent:e.textContent||"",rootId:C};default:return!1}}function lr(e,t){if(t.hasNode(e)){var n=t.getId(e);return n===1?void 0:n}}function cr(e,t){var n,r=t.maskTextClass,o=t.maskTextSelector,i=t.maskTextFn,c=t.rootId,a=e.parentNode&&e.parentNode.tagName,l=e.textContent,s=a==="STYLE"?!0:void 0,u=a==="SCRIPT"?!0:void 0;if(s&&l){try{e.nextSibling||e.previousSibling||!((n=e.parentNode.sheet)===null||n===void 0)&&n.cssRules&&(l=Xn(e.parentNode.sheet))}catch(d){console.warn("Cannot get CSS styles from text's parentNode. Error: ".concat(d),e)}l=Pe(l,Ze())}return u&&(l="SCRIPT_PLACEHOLDER"),!s&&!u&&l&&Tt(e,r,o)&&(l=i?i(l):l.replace(/[\S]/g,"*")),{type:M.Text,textContent:l||"",isStyle:s,rootId:c}}function ur(e,t){for(var n=t.doc,r=t.blockClass,o=t.blockSelector,i=t.inlineStylesheet,c=t.maskInputOptions,a=c===void 0?{}:c,l=t.maskInputFn,s=t.dataURLOptions,u=s===void 0?{}:s,d=t.inlineImages,m=t.recordCanvas,h=t.keepIframeSrcFn,f=t.newlyAddedElement,y=f===void 0?!1:f,S=t.rootId,p=rr(e,r,o),b=zn(e),v={},C=e.attributes.length,O=0;O<C;O++){var R=e.attributes[O];v[R.name]=Nt(n,b,R.name,R.value)}if(b==="link"&&i){var _=Array.from(n.styleSheets).find(function(w){return w.href===e.href}),F=null;_&&(F=Xe(_)),F&&(delete v.rel,delete v.href,v._cssText=Pe(F,_.href))}if(b==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){var F=Xe(e.sheet);F&&(v._cssText=Pe(F,Ze()))}if(b==="input"||b==="textarea"||b==="select"){var q=e.value;v.type!=="radio"&&v.type!=="checkbox"&&v.type!=="submit"&&v.type!=="button"&&q?v.value=He({type:v.type,tagName:b,value:q,maskInputOptions:a,maskInputFn:l}):e.checked&&(v.checked=e.checked)}if(b==="option"&&(e.selected&&!a.select?v.selected=!0:delete v.selected),b==="canvas"&&m){if(e.__context==="2d")Un(e)||(v.rr_dataURL=e.toDataURL(u.type,u.quality));else if(!("__context"in e)){var H=e.toDataURL(u.type,u.quality),G=document.createElement("canvas");G.width=e.width,G.height=e.height;var Z=G.toDataURL(u.type,u.quality);H!==Z&&(v.rr_dataURL=H)}}if(b==="img"&&d){ye||(ye=n.createElement("canvas"),wt=ye.getContext("2d"));var W=e,K=W.crossOrigin;W.crossOrigin="anonymous";var Q=function(){try{ye.width=W.naturalWidth,ye.height=W.naturalHeight,wt.drawImage(W,0,0),v.rr_dataURL=ye.toDataURL(u.type,u.quality)}catch(w){console.warn("Cannot inline img src=".concat(W.currentSrc,"! Error: ").concat(w))}K?v.crossOrigin=K:W.removeAttribute("crossorigin")};W.complete&&W.naturalWidth!==0?Q():W.onload=Q}if((b==="audio"||b==="video")&&(v.rr_mediaState=e.paused?"paused":"played",v.rr_mediaCurrentTime=e.currentTime),y||(e.scrollLeft&&(v.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(v.rr_scrollTop=e.scrollTop)),p){var z=e.getBoundingClientRect(),k=z.width,X=z.height;v={class:v.class,rr_width:"".concat(k,"px"),rr_height:"".concat(X,"px")}}return b==="iframe"&&!h(v.src)&&(e.contentDocument||(v.rr_src=v.src),delete v.src),{type:M.Element,tagName:b,attributes:v,childNodes:[],isSVG:nr(e)||void 0,needBlock:p,rootId:S}}function L(e){return e===void 0?"":e.toLowerCase()}function dr(e,t){return!!(t.comment&&e.type===M.Comment||e.type===M.Element&&(t.script&&(e.tagName==="script"||e.tagName==="link"&&e.attributes.rel==="preload"&&e.attributes.as==="script"||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&e.attributes.href.endsWith(".js"))||t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(L(e.attributes.name).match(/^msapplication-tile(image|color)$/)||L(e.attributes.name)==="application-name"||L(e.attributes.rel)==="icon"||L(e.attributes.rel)==="apple-touch-icon"||L(e.attributes.rel)==="shortcut icon"))||e.tagName==="meta"&&(t.headMetaDescKeywords&&L(e.attributes.name).match(/^description|keywords$/)||t.headMetaSocial&&(L(e.attributes.property).match(/^(og|twitter|fb):/)||L(e.attributes.name).match(/^(og|twitter):/)||L(e.attributes.name)==="pinterest")||t.headMetaRobots&&(L(e.attributes.name)==="robots"||L(e.attributes.name)==="googlebot"||L(e.attributes.name)==="bingbot")||t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0||t.headMetaAuthorship&&(L(e.attributes.name)==="author"||L(e.attributes.name)==="generator"||L(e.attributes.name)==="framework"||L(e.attributes.name)==="publisher"||L(e.attributes.name)==="progid"||L(e.attributes.property).match(/^article:/)||L(e.attributes.property).match(/^product:/))||t.headMetaVerification&&(L(e.attributes.name)==="google-site-verification"||L(e.attributes.name)==="yandex-verification"||L(e.attributes.name)==="csrf-token"||L(e.attributes.name)==="p:domain_verify"||L(e.attributes.name)==="verify-v1"||L(e.attributes.name)==="verification"||L(e.attributes.name)==="shopify-checkout-api-token"))))}function ge(e,t){var n=t.doc,r=t.mirror,o=t.blockClass,i=t.blockSelector,c=t.maskTextClass,a=t.maskTextSelector,l=t.skipChild,s=l===void 0?!1:l,u=t.inlineStylesheet,d=u===void 0?!0:u,m=t.maskInputOptions,h=m===void 0?{}:m,f=t.maskTextFn,y=t.maskInputFn,S=t.slimDOMOptions,p=t.dataURLOptions,b=p===void 0?{}:p,v=t.inlineImages,C=v===void 0?!1:v,O=t.recordCanvas,R=O===void 0?!1:O,_=t.onSerialize,F=t.onIframeLoad,q=t.iframeLoadTimeout,H=q===void 0?5e3:q,G=t.onStylesheetLoad,Z=t.stylesheetLoadTimeout,W=Z===void 0?5e3:Z,K=t.keepIframeSrcFn,Q=K===void 0?function(){return!1}:K,z=t.newlyAddedElement,k=z===void 0?!1:z,X=t.preserveWhiteSpace,w=X===void 0?!0:X,g=ar(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,maskTextClass:c,maskTextSelector:a,inlineStylesheet:d,maskInputOptions:h,maskTextFn:f,maskInputFn:y,dataURLOptions:b,inlineImages:C,recordCanvas:R,keepIframeSrcFn:Q,newlyAddedElement:k});if(!g)return console.warn(e,"not serialized"),null;var N;if(r.hasNode(e)?N=r.getId(e):dr(g,S)||!w&&g.type===M.Text&&!g.isStyle&&!g.textContent.replace(/^\s+|\s+$/gm,"").length?N=De:N=Gn(),N===De)return null;var T=Object.assign(g,{id:N});r.add(e,T),_&&_(e);var P=!s;if(T.type===M.Element&&(P=P&&!T.needBlock,delete T.needBlock,e.shadowRoot&&(T.isShadowHost=!0)),(T.type===M.Document||T.type===M.Element)&&P){S.headWhitespace&&T.type===M.Element&&T.tagName==="head"&&(w=!1);for(var U={doc:n,mirror:r,blockClass:o,blockSelector:i,maskTextClass:c,maskTextSelector:a,skipChild:s,inlineStylesheet:d,maskInputOptions:h,maskTextFn:f,maskInputFn:y,slimDOMOptions:S,dataURLOptions:b,inlineImages:C,recordCanvas:R,preserveWhiteSpace:w,onSerialize:_,onIframeLoad:F,iframeLoadTimeout:H,onStylesheetLoad:G,stylesheetLoadTimeout:W,keepIframeSrcFn:Q},se=0,A=Array.from(e.childNodes);se<A.length;se++){var $=A[se],le=ge($,U);le&&T.childNodes.push(le)}if(vt(e)&&e.shadowRoot)for(var gt=0,Wn=Array.from(e.shadowRoot.childNodes);gt<Wn.length;gt++){var $=Wn[gt],le=ge($,U);le&&(le.isShadow=!0,T.childNodes.push(le))}}return e.parentNode&&xe(e.parentNode)&&(T.isShadow=!0),T.type===M.Element&&T.tagName==="iframe"&&or(e,function(){var Me=e.contentDocument;if(Me&&F){var $n=ge(Me,{doc:Me,mirror:r,blockClass:o,blockSelector:i,maskTextClass:c,maskTextSelector:a,skipChild:!1,inlineStylesheet:d,maskInputOptions:h,maskTextFn:f,maskInputFn:y,slimDOMOptions:S,dataURLOptions:b,inlineImages:C,recordCanvas:R,preserveWhiteSpace:w,onSerialize:_,onIframeLoad:F,iframeLoadTimeout:H,onStylesheetLoad:G,stylesheetLoadTimeout:W,keepIframeSrcFn:Q});$n&&F(e,$n)}},H),T.type===M.Element&&T.tagName==="link"&&T.attributes.rel==="stylesheet"&&(ir(e,function(){if(G){var Me=ge(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,maskTextClass:c,maskTextSelector:a,skipChild:!1,inlineStylesheet:d,maskInputOptions:h,maskTextFn:f,maskInputFn:y,slimDOMOptions:S,dataURLOptions:b,inlineImages:C,recordCanvas:R,preserveWhiteSpace:w,onSerialize:_,onIframeLoad:F,iframeLoadTimeout:H,onStylesheetLoad:G,stylesheetLoadTimeout:W,keepIframeSrcFn:Q});Me&&G(e,Me)}},W),sr(e)===!1)?null:T}function hr(e,t){var n=t||{},r=n.mirror,o=r===void 0?new Ye:r,i=n.blockClass,c=i===void 0?"rr-block":i,a=n.blockSelector,l=a===void 0?null:a,s=n.maskTextClass,u=s===void 0?"rr-mask":s,d=n.maskTextSelector,m=d===void 0?null:d,h=n.inlineStylesheet,f=h===void 0?!0:h,y=n.inlineImages,S=y===void 0?!1:y,p=n.recordCanvas,b=p===void 0?!1:p,v=n.maskAllInputs,C=v===void 0?!1:v,O=n.maskTextFn,R=n.maskInputFn,_=n.slimDOM,F=_===void 0?!1:_,q=n.dataURLOptions,H=n.preserveWhiteSpace,G=n.onSerialize,Z=n.onIframeLoad,W=n.iframeLoadTimeout,K=n.onStylesheetLoad,Q=n.stylesheetLoadTimeout,z=n.keepIframeSrcFn,k=z===void 0?function(){return!1}:z,X=C===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:C===!1?{password:!0}:C,w=F===!0||F==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:F==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:F===!1?{}:F;return ge(e,{doc:e,mirror:o,blockClass:c,blockSelector:l,maskTextClass:u,maskTextSelector:m,skipChild:!1,inlineStylesheet:f,maskInputOptions:X,maskTextFn:O,maskInputFn:R,slimDOMOptions:w,dataURLOptions:q,inlineImages:S,recordCanvas:b,preserveWhiteSpace:H,onSerialize:G,onIframeLoad:Z,iframeLoadTimeout:W,onStylesheetLoad:K,stylesheetLoadTimeout:Q,keepIframeSrcFn:k,newlyAddedElement:!1})}var Et=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;function mr(e,t){t===void 0&&(t={});var n=1,r=1;function o(w){var g=w.match(/\n/g);g&&(n+=g.length);var N=w.lastIndexOf(`
`);r=N===-1?r+w.length:w.length-N}function i(){var w={line:n,column:r};return function(g){return g.position=new c(w),f(),g}}var c=function(){function w(g){this.start=g,this.end={line:n,column:r},this.source=t.source}return w}();c.prototype.content=e;var a=[];function l(w){var g=new Error("".concat(t.source||"",":").concat(n,":").concat(r,": ").concat(w));if(g.reason=w,g.filename=t.source,g.line=n,g.column=r,g.source=e,t.silent)a.push(g);else throw g}function s(){var w=m();return{type:"stylesheet",stylesheet:{source:t.source,rules:w,parsingErrors:a}}}function u(){return h(/^{\s*/)}function d(){return h(/^}/)}function m(){var w,g=[];for(f(),y(g);e.length&&e.charAt(0)!=="}"&&(w=k()||X());)w!==!1&&(g.push(w),y(g));return g}function h(w){var g=w.exec(e);if(g){var N=g[0];return o(N),e=e.slice(N.length),g}}function f(){h(/^\s*/)}function y(w){w===void 0&&(w=[]);for(var g;g=S();)g!==!1&&w.push(g),g=S();return w}function S(){var w=i();if(!(e.charAt(0)!=="/"||e.charAt(1)!=="*")){for(var g=2;e.charAt(g)!==""&&(e.charAt(g)!=="*"||e.charAt(g+1)!=="/");)++g;if(g+=2,e.charAt(g-1)==="")return l("End of comment missing");var N=e.slice(2,g-2);return r+=2,o(N),e=e.slice(g),r+=2,w({type:"comment",comment:N})}}function p(){var w=h(/^([^{]+)/);if(w)return ce(w[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(g){return g.replace(/,/g,"\u200C")}).split(/\s*(?![^(]*\)),\s*/).map(function(g){return g.replace(/\u200C/g,",")})}function b(){var w=i(),g=h(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(g){var N=ce(g[0]);if(!h(/^:\s*/))return l("property missing ':'");var T=h(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/),P=w({type:"declaration",property:N.replace(Et,""),value:T?ce(T[0]).replace(Et,""):""});return h(/^[;\s]*/),P}}function v(){var w=[];if(!u())return l("missing '{'");y(w);for(var g;g=b();)g!==!1&&(w.push(g),y(w)),g=b();return d()?w:l("missing '}'")}function C(){for(var w,g=[],N=i();w=h(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)g.push(w[1]),h(/^,\s*/);if(g.length)return N({type:"keyframe",values:g,declarations:v()})}function O(){var w=i(),g=h(/^@([-\w]+)?keyframes\s*/);if(g){var N=g[1];if(g=h(/^([-\w]+)\s*/),!g)return l("@keyframes missing name");var T=g[1];if(!u())return l("@keyframes missing '{'");for(var P,U=y();P=C();)U.push(P),U=U.concat(y());return d()?w({type:"keyframes",name:T,vendor:N,keyframes:U}):l("@keyframes missing '}'")}}function R(){var w=i(),g=h(/^@supports *([^{]+)/);if(g){var N=ce(g[1]);if(!u())return l("@supports missing '{'");var T=y().concat(m());return d()?w({type:"supports",supports:N,rules:T}):l("@supports missing '}'")}}function _(){var w=i(),g=h(/^@host\s*/);if(g){if(!u())return l("@host missing '{'");var N=y().concat(m());return d()?w({type:"host",rules:N}):l("@host missing '}'")}}function F(){var w=i(),g=h(/^@media *([^{]+)/);if(g){var N=ce(g[1]);if(!u())return l("@media missing '{'");var T=y().concat(m());return d()?w({type:"media",media:N,rules:T}):l("@media missing '}'")}}function q(){var w=i(),g=h(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(g)return w({type:"custom-media",name:ce(g[1]),media:ce(g[2])})}function H(){var w=i(),g=h(/^@page */);if(g){var N=p()||[];if(!u())return l("@page missing '{'");for(var T=y(),P;P=b();)T.push(P),T=T.concat(y());return d()?w({type:"page",selectors:N,declarations:T}):l("@page missing '}'")}}function G(){var w=i(),g=h(/^@([-\w]+)?document *([^{]+)/);if(g){var N=ce(g[1]),T=ce(g[2]);if(!u())return l("@document missing '{'");var P=y().concat(m());return d()?w({type:"document",document:T,vendor:N,rules:P}):l("@document missing '}'")}}function Z(){var w=i(),g=h(/^@font-face\s*/);if(g){if(!u())return l("@font-face missing '{'");for(var N=y(),T;T=b();)N.push(T),N=N.concat(y());return d()?w({type:"font-face",declarations:N}):l("@font-face missing '}'")}}var W=z("import"),K=z("charset"),Q=z("namespace");function z(w){var g=new RegExp("^@"+w+"\\s*([^;]+);");return function(){var N=i(),T=h(g);if(T){var P={type:w};return P[w]=T[1].trim(),N(P)}}}function k(){if(e[0]==="@")return O()||F()||q()||R()||W()||K()||Q()||G()||H()||_()||Z()}function X(){var w=i(),g=p();return g?(y(),w({type:"rule",selectors:g,declarations:v()})):l("selector missing")}return Ke(s())}function ce(e){return e?e.replace(/^\s+|\s+$/g,""):""}function Ke(e,t){for(var n=e&&typeof e.type=="string",r=n?e:t,o=0,i=Object.keys(e);o<i.length;o++){var c=i[o],a=e[c];Array.isArray(a)?a.forEach(function(l){Ke(l,r)}):a&&typeof a=="object"&&Ke(a,r)}return n&&Object.defineProperty(e,"parent",{configurable:!0,writable:!0,enumerable:!1,value:t||null}),e}var Ct={script:"noscript",altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};function pr(e){var t=Ct[e.tagName]?Ct[e.tagName]:e.tagName;return t==="link"&&e.attributes._cssText&&(t="style"),t}function fr(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var It=/([^\\]):hover/,yr=new RegExp(It.source,"g");function Mt(e,t){var n=t?.stylesWithHoverClass.get(e);if(n)return n;var r=mr(e,{silent:!0});if(!r.stylesheet)return e;var o=[];if(r.stylesheet.rules.forEach(function(a){"selectors"in a&&(a.selectors||[]).forEach(function(l){It.test(l)&&o.push(l)})}),o.length===0)return e;var i=new RegExp(o.filter(function(a,l){return o.indexOf(a)===l}).sort(function(a,l){return l.length-a.length}).map(function(a){return fr(a)}).join("|"),"g"),c=e.replace(i,function(a){var l=a.replace(yr,"$1.\\:hover");return"".concat(a,", ").concat(l)});return t?.stylesWithHoverClass.set(e,c),c}function xt(){var e=new Map;return{stylesWithHoverClass:e}}function gr(e,t){var n=t.doc,r=t.hackCss,o=t.cache;switch(e.type){case M.Document:return n.implementation.createDocument(null,"",null);case M.DocumentType:return n.implementation.createDocumentType(e.name||"html",e.publicId,e.systemId);case M.Element:{var i=pr(e),c;e.isSVG?c=n.createElementNS("http://www.w3.org/2000/svg",i):c=n.createElement(i);var a=function(s){if(!Object.prototype.hasOwnProperty.call(e.attributes,s))return"continue";var u=e.attributes[s];if(i==="option"&&s==="selected"&&u===!1)return"continue";if(u=typeof u=="boolean"||typeof u=="number"?"":u,s.startsWith("rr_")){if(i==="canvas"&&s==="rr_dataURL"){var d=document.createElement("img");d.src=u,d.onload=function(){var v=c.getContext("2d");v&&v.drawImage(d,0,0,d.width,d.height)}}else if(i==="img"&&s==="rr_dataURL"){var m=c;m.currentSrc.startsWith("data:")||(m.setAttribute("rrweb-original-src",e.attributes.src),m.src=u)}if(s==="rr_width")c.style.width=u;else if(s==="rr_height")c.style.height=u;else if(s==="rr_mediaCurrentTime")c.currentTime=e.attributes.rr_mediaCurrentTime;else if(s==="rr_mediaState")switch(u){case"played":c.play().catch(function(v){return console.warn("media playback error",v)});break;case"paused":c.pause();break}}else{var h=i==="textarea"&&s==="value",f=i==="style"&&s==="_cssText";if(f&&r&&(u=Mt(u,o)),h||f){for(var y=n.createTextNode(u),S=0,p=Array.from(c.childNodes);S<p.length;S++){var b=p[S];b.nodeType===c.TEXT_NODE&&c.removeChild(b)}return c.appendChild(y),"continue"}try{if(e.isSVG&&s==="xlink:href")c.setAttributeNS("http://www.w3.org/1999/xlink",s,u);else if(s==="onload"||s==="onclick"||s.substring(0,7)==="onmouse")c.setAttribute("_"+s,u);else{if(i==="meta"&&e.attributes["http-equiv"]==="Content-Security-Policy"&&s==="content")return c.setAttribute("csp-content",u),"continue";i==="link"&&e.attributes.rel==="preload"&&e.attributes.as==="script"||i==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&e.attributes.href.endsWith(".js")||(i==="img"&&e.attributes.srcset&&e.attributes.rr_dataURL?c.setAttribute("rrweb-original-srcset",e.attributes.srcset):c.setAttribute(s,u))}}catch{}}};for(var l in e.attributes)a(l);if(e.isShadowHost)if(!c.shadowRoot)c.attachShadow({mode:"open"});else for(;c.shadowRoot.firstChild;)c.shadowRoot.removeChild(c.shadowRoot.firstChild);return c}case M.Text:return n.createTextNode(e.isStyle&&r?Mt(e.textContent,o):e.textContent);case M.CDATA:return n.createCDATASection(e.textContent);case M.Comment:return n.createComment(e.textContent);default:return null}}function Ve(e,t){var n=t.doc,r=t.mirror,o=t.skipChild,i=o===void 0?!1:o,c=t.hackCss,a=c===void 0?!0:c,l=t.afterAppend,s=t.cache,u=gr(e,{doc:n,hackCss:a,cache:s});if(!u)return null;if(e.rootId&&console.assert(r.getNode(e.rootId)===n,"Target document should have the same root id."),e.type===M.Document&&(n.close(),n.open(),e.compatMode==="BackCompat"&&e.childNodes&&e.childNodes[0].type!==M.DocumentType&&(e.childNodes[0].type===M.Element&&"xmlns"in e.childNodes[0].attributes&&e.childNodes[0].attributes.xmlns==="http://www.w3.org/1999/xhtml"?n.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'):n.write('<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">')),u=n),r.add(u,e),(e.type===M.Document||e.type===M.Element)&&!i)for(var d=0,m=e.childNodes;d<m.length;d++){var h=m[d],f=Ve(h,{doc:n,mirror:r,skipChild:!1,hackCss:a,afterAppend:l,cache:s});if(!f){console.warn("Failed to rebuild",h);continue}h.isShadow&&vt(u)&&u.shadowRoot?u.shadowRoot.appendChild(f):u.appendChild(f),l&&l(f)}return u}function vr(e,t){function n(c){t(c)}for(var r=0,o=e.getIds();r<o.length;r++){var i=o[r];e.has(i)&&n(e.getNode(i))}}function br(e,t){var n=t.getMeta(e);if(n?.type===M.Element){var r=e;for(var o in n.attributes)if(Object.prototype.hasOwnProperty.call(n.attributes,o)&&o.startsWith("rr_")){var i=n.attributes[o];o==="rr_scrollLeft"&&(r.scrollLeft=i),o==="rr_scrollTop"&&(r.scrollTop=i)}}}function Sr(e,t){var n=t.doc,r=t.onVisit,o=t.hackCss,i=o===void 0?!0:o,c=t.afterAppend,a=t.cache,l=t.mirror,s=l===void 0?new Ye:l,u=Ve(e,{doc:n,mirror:s,skipChild:!1,hackCss:i,afterAppend:c,cache:a});return vr(s,function(d){r&&r(d),br(d,s)}),u}function ee(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const ve=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;J.mirror={map:{},getId(){return console.error(ve),-1},getNode(){return console.error(ve),null},removeNodeFromMap(){console.error(ve)},has(){return console.error(ve),!1},reset(){console.error(ve)}},typeof window<"u"&&window.Proxy&&window.Reflect&&(J.mirror=new Proxy(J.mirror,{get(e,t,n){return t==="map"&&console.error(ve),Reflect.get(e,t,n)}}));function be(e,t,n={}){let r=null,o=0;return function(...i){const c=Date.now();!o&&n.leading===!1&&(o=c);const a=t-(c-o),l=this;a<=0||a>t?(r&&(clearTimeout(r),r=null),o=c,e.apply(l,i)):!r&&n.trailing!==!1&&(r=setTimeout(()=>{o=n.leading===!1?0:Date.now(),r=null,e.apply(l,i)},a))}}function ke(e,t,n,r,o=window){const i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(c){setTimeout(()=>{n.set.call(this,c)},0),i&&i.set&&i.set.call(this,c)}}),()=>ke(e,t,i||{},!0)}function he(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch{return()=>{}}}function Qe(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Je(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function te(e,t,n){if(!e)return!1;const r=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(!r)return!1;if(typeof t=="string"){if(r.classList.contains(t)||n&&r.closest("."+t)!==null)return!0}else if($e(r,t,n))return!0;return!1}function Dt(e,t){return t.getId(e)!==-1}function Ue(e,t){return t.getId(e)===De}function qe(e,t){if(xe(e))return!1;const n=t.getId(e);return t.has(n)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?qe(e.parentNode,t):!0:!0}function et(e){return Boolean(e.changedTouches)}function tt(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let n=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function kt(e){const t={},n=(o,i)=>{const c={value:o,parent:i,children:[]};return t[o.node.id]=c,c},r=[];for(const o of e){const{nextId:i,parentId:c}=o;if(i&&i in t){const a=t[i];if(a.parent){const l=a.parent.children.indexOf(a);a.parent.children.splice(l,0,n(o,a.parent))}else{const l=r.indexOf(a);r.splice(l,0,n(o,null))}continue}if(c in t){const a=t[c];a.children.push(n(o,a));continue}r.push(n(o,null))}return r}function nt(e,t){t(e.value);for(let n=e.children.length-1;n>=0;n--)nt(e.children[n],t)}function Se(e,t){return Boolean(e.nodeName==="IFRAME"&&t.getMeta(e))}function rt(e,t){return Boolean(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function ot(e,t){var n,r;const o=(r=(n=e.ownerDocument)==null?void 0:n.defaultView)==null?void 0:r.frameElement;if(!o||o===t)return{x:0,y:0,relativeScale:1,absoluteScale:1};const i=o.getBoundingClientRect(),c=ot(o,t),a=i.height/o.clientHeight;return{x:i.x*c.relativeScale+c.x,y:i.y*c.relativeScale+c.y,relativeScale:a,absoluteScale:c.absoluteScale*a}}function Re(e){return Boolean(e?.shadowRoot)}function we(e,t){const n=e[t[0]];return t.length===1?n:we(n.cssRules[t[1]].cssRules,t.slice(2))}function st(e){const t=[...e],n=t.pop();return{positions:t,index:n}}function Rt(e){const t=new Set,n=[];for(let r=e.length;r--;){const o=e[r];t.has(o.id)||(n.push(o),t.add(o.id))}return n}var wr=Object.freeze({__proto__:null,on:ee,get _mirror(){return J.mirror},throttle:be,hookSetter:ke,patch:he,getWindowHeight:Qe,getWindowWidth:Je,isBlocked:te,isSerialized:Dt,isIgnored:Ue,isAncestorRemoved:qe,isTouchEvent:et,polyfill:tt,queueToResolveTrees:kt,iterateResolveTree:nt,isSerializedIframe:Se,isSerializedStylesheet:rt,getBaseDimension:ot,hasShadowRoot:Re,getNestedRule:we,getPositionsAndIndex:st,uniqueTextMutations:Rt}),E=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(E||{}),I=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e))(I||{}),B=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(B||{}),ue=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(ue||{}),me=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e))(me||{}),D=(e=>(e.Start="start",e.Pause="pause",e.Resume="resume",e.Resize="resize",e.Finish="finish",e.FullsnapshotRebuilded="fullsnapshot-rebuilded",e.LoadStylesheetStart="load-stylesheet-start",e.LoadStylesheetEnd="load-stylesheet-end",e.SkipStart="skip-start",e.SkipEnd="skip-end",e.MouseInteraction="mouse-interaction",e.EventCast="event-cast",e.CustomEvent="custom-event",e.Flush="flush",e.StateChange="state-change",e.PlayBack="play-back",e))(D||{});function Ot(e){return"__ln"in e}class Nr{constructor(){this.length=0,this.head=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<t;r++)n=n?.next||null;return n}addNode(t){const n={value:t,previous:null,next:null};if(t.__ln=n,t.previousSibling&&Ot(t.previousSibling)){const r=t.previousSibling.__ln.next;n.next=r,n.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(t.nextSibling&&Ot(t.nextSibling)&&t.nextSibling.__ln.previous){const r=t.nextSibling.__ln.previous;n.previous=r,n.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;this.length++}removeNode(t){const n=t.__ln;!this.head||(n.previous?(n.previous.next=n.next,n.next&&(n.next.previous=n.previous)):(this.head=n.next,this.head&&(this.head.previous=null)),t.__ln&&delete t.__ln,this.length--)}}const At=(e,t)=>`${e}@${t}`;class Tr{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],n=new Nr,r=a=>{let l=a,s=De;for(;s===De;)l=l&&l.nextSibling,s=l&&this.mirror.getId(l);return s},o=a=>{var l,s,u,d,m;const h=a.getRootNode?(l=a.getRootNode())==null?void 0:l.host:null;let f=h;for(;(u=(s=f?.getRootNode)==null?void 0:s.call(f))!=null&&u.host;)f=((m=(d=f?.getRootNode)==null?void 0:d.call(f))==null?void 0:m.host)||null;const y=!this.doc.contains(a)&&(!f||!this.doc.contains(f));if(!a.parentNode||y)return;const S=xe(a.parentNode)?this.mirror.getId(h):this.mirror.getId(a.parentNode),p=r(a);if(S===-1||p===-1)return n.addNode(a);const b=ge(a,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:v=>{Se(v,this.mirror)&&this.iframeManager.addIframe(v),rt(v,this.mirror)&&this.stylesheetManager.addStylesheet(v),Re(a)&&this.shadowDomManager.addShadowRoot(a.shadowRoot,document)},onIframeLoad:(v,C)=>{this.iframeManager.attachIframe(v,C,this.mirror),this.shadowDomManager.observeAttachShadow(v)},onStylesheetLoad:(v,C)=>{this.stylesheetManager.attachStylesheet(v,C,this.mirror)}});b&&t.push({parentId:S,nextId:p,node:b})};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const a of Array.from(this.movedSet.values()))Lt(this.removes,a,this.mirror)&&!this.movedSet.has(a.parentNode)||o(a);for(const a of Array.from(this.addedSet.values()))!_t(this.droppedSet,a)&&!Lt(this.removes,a,this.mirror)||_t(this.movedSet,a)?o(a):this.droppedSet.add(a);let i=null;for(;n.length;){let a=null;if(i){const l=this.mirror.getId(i.value.parentNode),s=r(i.value);l!==-1&&s!==-1&&(a=i)}if(!a)for(let l=n.length-1;l>=0;l--){const s=n.get(l);if(s){const u=this.mirror.getId(s.value.parentNode),d=r(s.value);if(u!==-1&&d!==-1){a=s;break}}}if(!a){for(;n.head;)n.removeNode(n.head.value);break}i=a.previous,n.removeNode(a.value),o(a.value)}const c={texts:this.texts.map(a=>({id:this.mirror.getId(a.node),value:a.value})).filter(a=>this.mirror.has(a.id)),attributes:this.attributes.map(a=>({id:this.mirror.getId(a.node),attributes:a.attributes})).filter(a=>this.mirror.has(a.id)),removes:this.removes,adds:t};!c.texts.length&&!c.attributes.length&&!c.removes.length&&!c.adds.length||(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(c))},this.processMutation=t=>{if(!Ue(t.target,this.mirror))switch(t.type){case"characterData":{const n=t.target.textContent;!te(t.target,this.blockClass,!1)&&n!==t.oldValue&&this.texts.push({value:Tt(t.target,this.maskTextClass,this.maskTextSelector)&&n?this.maskTextFn?this.maskTextFn(n):n.replace(/[\S]/g,"*"):n,node:t.target});break}case"attributes":{const n=t.target;let r=t.target.getAttribute(t.attributeName);if(t.attributeName==="value"&&(r=He({maskInputOptions:this.maskInputOptions,tagName:t.target.tagName,type:t.target.getAttribute("type"),value:r,maskInputFn:this.maskInputFn})),te(t.target,this.blockClass,!1)||r===t.oldValue)return;let o=this.attributes.find(i=>i.node===t.target);if(o||(o={node:t.target,attributes:{}},this.attributes.push(o)),t.attributeName==="style"){const i=this.doc.createElement("span");t.oldValue&&i.setAttribute("style",t.oldValue),(o.attributes.style===void 0||o.attributes.style===null)&&(o.attributes.style={});const c=o.attributes.style;for(const a of Array.from(n.style)){const l=n.style.getPropertyValue(a),s=n.style.getPropertyPriority(a);(l!==i.style.getPropertyValue(a)||s!==i.style.getPropertyPriority(a))&&(s===""?c[a]=l:c[a]=[l,s])}for(const a of Array.from(i.style))n.style.getPropertyValue(a)===""&&(c[a]=!1)}else o.attributes[t.attributeName]=Nt(this.doc,t.target.tagName,t.attributeName,r);break}case"childList":{if(te(t.target,this.blockClass,!0))return;t.addedNodes.forEach(n=>this.genAdds(n,t.target)),t.removedNodes.forEach(n=>{const r=this.mirror.getId(n),o=xe(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);te(t.target,this.blockClass,!1)||Ue(n,this.mirror)||!Dt(n,this.mirror)||(this.addedSet.has(n)?(it(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(t.target)&&r===-1||qe(t.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[At(r,o)]?it(this.movedSet,n):this.removes.push({parentId:o,id:r,isShadow:xe(t.target)?!0:void 0})),this.mapRemoves.push(n))});break}}},this.genAdds=(t,n)=>{if(this.mirror.hasNode(t)){if(Ue(t,this.mirror))return;this.movedSet.add(t);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[At(this.mirror.getId(t),r)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);te(t,this.blockClass,!1)||t.childNodes.forEach(r=>this.genAdds(r))}}init(t){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","recordCanvas","inlineImages","slimDOMOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager"].forEach(n=>{this[n]=t[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function it(e,t){e.delete(t),t.childNodes.forEach(n=>it(e,n))}function Lt(e,t,n){return e.length===0?!1:Ft(e,t,n)}function Ft(e,t,n){const{parentNode:r}=t;if(!r)return!1;const o=n.getId(r);return e.some(i=>i.id===o)?!0:Ft(e,r,n)}function _t(e,t){return e.size===0?!1:Pt(e,t)}function Pt(e,t){const{parentNode:n}=t;return n?e.has(n)?!0:Pt(e,n):!1}var Er=Object.defineProperty,Cr=Object.defineProperties,Ir=Object.getOwnPropertyDescriptors,Wt=Object.getOwnPropertySymbols,Mr=Object.prototype.hasOwnProperty,xr=Object.prototype.propertyIsEnumerable,$t=(e,t,n)=>t in e?Er(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vt=(e,t)=>{for(var n in t||(t={}))Mr.call(t,n)&&$t(e,n,t[n]);if(Wt)for(var n of Wt(t))xr.call(t,n)&&$t(e,n,t[n]);return e},Dr=(e,t)=>Cr(e,Ir(t));const pe=[],Ut=typeof CSSGroupingRule<"u",jt=typeof CSSMediaRule<"u",Bt=typeof CSSSupportsRule<"u",Gt=typeof CSSConditionRule<"u";function Oe(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0];return e.target}catch{return e.target}}function zt(e,t){var n,r;const o=new Tr;pe.push(o),o.init(e);let i=window.MutationObserver||window.__rrMutationObserver;const c=(r=(n=window?.Zone)==null?void 0:n.__symbol__)==null?void 0:r.call(n,"MutationObserver");c&&window[c]&&(i=window[c]);const a=new i(o.processMutations.bind(o));return a.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),a}function kr({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(t.mousemove===!1)return()=>{};const o=typeof t.mousemove=="number"?t.mousemove:50,i=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500;let c=[],a;const l=be(d=>{const m=Date.now()-a;e(c.map(h=>(h.timeOffset-=m,h)),d),c=[],a=null},i),s=be(d=>{const m=Oe(d),{clientX:h,clientY:f}=et(d)?d.changedTouches[0]:d;a||(a=Date.now()),c.push({x:h,y:f,id:r.getId(m),timeOffset:Date.now()-a}),l(typeof DragEvent<"u"&&d instanceof DragEvent?I.Drag:d instanceof MouseEvent?I.MouseMove:I.TouchMove)},o,{trailing:!1}),u=[ee("mousemove",s,n),ee("touchmove",s,n),ee("drag",s,n)];return()=>{u.forEach(d=>d())}}function Rr({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,sampling:o}){if(o.mouseInteraction===!1)return()=>{};const i=o.mouseInteraction===!0||o.mouseInteraction===void 0?{}:o.mouseInteraction,c=[],a=l=>s=>{const u=Oe(s);if(te(u,r,!0))return;const d=et(s)?s.changedTouches[0]:s;if(!d)return;const m=n.getId(u),{clientX:h,clientY:f}=d;e({type:B[l],id:m,x:h,y:f})};return Object.keys(B).filter(l=>Number.isNaN(Number(l))&&!l.endsWith("_Departed")&&i[l]!==!1).forEach(l=>{const s=l.toLowerCase(),u=a(l);c.push(ee(s,u,t))}),()=>{c.forEach(l=>l())}}function Yt({scrollCb:e,doc:t,mirror:n,blockClass:r,sampling:o}){const i=be(c=>{const a=Oe(c);if(!a||te(a,r,!0))return;const l=n.getId(a);if(a===t){const s=t.scrollingElement||t.documentElement;e({id:l,x:s.scrollLeft,y:s.scrollTop})}else e({id:l,x:a.scrollLeft,y:a.scrollTop})},o.scroll||100);return ee("scroll",i,t)}function Or({viewportResizeCb:e}){let t=-1,n=-1;const r=be(()=>{const o=Qe(),i=Je();(t!==o||n!==i)&&(e({width:Number(i),height:Number(o)}),t=o,n=i)},200);return ee("resize",r,window)}function Ht(e,t){const n=Vt({},e);return t||delete n.userTriggered,n}const Ar=["INPUT","TEXTAREA","SELECT"],Xt=new WeakMap;function Lr({inputCb:e,doc:t,mirror:n,blockClass:r,ignoreClass:o,maskInputOptions:i,maskInputFn:c,sampling:a,userTriggeredOnInput:l}){function s(f){let y=Oe(f);const S=f.isTrusted;if(y&&y.tagName==="OPTION"&&(y=y.parentElement),!y||!y.tagName||Ar.indexOf(y.tagName)<0||te(y,r,!0))return;const p=y.type;if(y.classList.contains(o))return;let b=y.value,v=!1;p==="radio"||p==="checkbox"?v=y.checked:(i[y.tagName.toLowerCase()]||i[p])&&(b=He({maskInputOptions:i,tagName:y.tagName,type:p,value:b,maskInputFn:c})),u(y,Ht({text:b,isChecked:v,userTriggered:S},l));const C=y.name;p==="radio"&&C&&v&&t.querySelectorAll(`input[type="radio"][name="${C}"]`).forEach(O=>{O!==y&&u(O,Ht({text:O.value,isChecked:!v,userTriggered:!1},l))})}function u(f,y){const S=Xt.get(f);if(!S||S.text!==y.text||S.isChecked!==y.isChecked){Xt.set(f,y);const p=n.getId(f);e(Dr(Vt({},y),{id:p}))}}const d=(a.input==="last"?["change"]:["input","change"]).map(f=>ee(f,s,t)),m=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"),h=[[HTMLInputElement.prototype,"value"],[HTMLInputElement.prototype,"checked"],[HTMLSelectElement.prototype,"value"],[HTMLTextAreaElement.prototype,"value"],[HTMLSelectElement.prototype,"selectedIndex"],[HTMLOptionElement.prototype,"selected"]];return m&&m.set&&d.push(...h.map(f=>ke(f[0],f[1],{set(){s({target:this})}}))),()=>{d.forEach(f=>f())}}function je(e){const t=[];function n(r,o){if(Ut&&r.parentRule instanceof CSSGroupingRule||jt&&r.parentRule instanceof CSSMediaRule||Bt&&r.parentRule instanceof CSSSupportsRule||Gt&&r.parentRule instanceof CSSConditionRule){const i=Array.from(r.parentRule.cssRules).indexOf(r);o.unshift(i)}else{const i=Array.from(r.parentStyleSheet.cssRules).indexOf(r);o.unshift(i)}return o}return n(e,t)}function Fr({styleSheetRuleCb:e,mirror:t},{win:n}){const r=n.CSSStyleSheet.prototype.insertRule;n.CSSStyleSheet.prototype.insertRule=function(a,l){const s=t.getId(this.ownerNode);return s!==-1&&e({id:s,adds:[{rule:a,index:l}]}),r.apply(this,[a,l])};const o=n.CSSStyleSheet.prototype.deleteRule;n.CSSStyleSheet.prototype.deleteRule=function(a){const l=t.getId(this.ownerNode);return l!==-1&&e({id:l,removes:[{index:a}]}),o.apply(this,[a])};const i={};Ut?i.CSSGroupingRule=n.CSSGroupingRule:(jt&&(i.CSSMediaRule=n.CSSMediaRule),Gt&&(i.CSSConditionRule=n.CSSConditionRule),Bt&&(i.CSSSupportsRule=n.CSSSupportsRule));const c={};return Object.entries(i).forEach(([a,l])=>{c[a]={insertRule:l.prototype.insertRule,deleteRule:l.prototype.deleteRule},l.prototype.insertRule=function(s,u){const d=t.getId(this.parentStyleSheet.ownerNode);return d!==-1&&e({id:d,adds:[{rule:s,index:[...je(this),u||0]}]}),c[a].insertRule.apply(this,[s,u])},l.prototype.deleteRule=function(s){const u=t.getId(this.parentStyleSheet.ownerNode);return u!==-1&&e({id:u,removes:[{index:[...je(this),s]}]}),c[a].deleteRule.apply(this,[s])}}),()=>{n.CSSStyleSheet.prototype.insertRule=r,n.CSSStyleSheet.prototype.deleteRule=o,Object.entries(i).forEach(([a,l])=>{l.prototype.insertRule=c[a].insertRule,l.prototype.deleteRule=c[a].deleteRule})}}function _r({styleDeclarationCb:e,mirror:t},{win:n}){const r=n.CSSStyleDeclaration.prototype.setProperty;n.CSSStyleDeclaration.prototype.setProperty=function(i,c,a){var l,s;const u=t.getId((s=(l=this.parentRule)==null?void 0:l.parentStyleSheet)==null?void 0:s.ownerNode);return u!==-1&&e({id:u,set:{property:i,value:c,priority:a},index:je(this.parentRule)}),r.apply(this,[i,c,a])};const o=n.CSSStyleDeclaration.prototype.removeProperty;return n.CSSStyleDeclaration.prototype.removeProperty=function(i){var c,a;const l=t.getId((a=(c=this.parentRule)==null?void 0:c.parentStyleSheet)==null?void 0:a.ownerNode);return l!==-1&&e({id:l,remove:{property:i},index:je(this.parentRule)}),o.apply(this,[i])},()=>{n.CSSStyleDeclaration.prototype.setProperty=r,n.CSSStyleDeclaration.prototype.removeProperty=o}}function Pr({mediaInteractionCb:e,blockClass:t,mirror:n,sampling:r}){const o=c=>be(a=>{const l=Oe(a);if(!l||te(l,t,!0))return;const{currentTime:s,volume:u,muted:d}=l;e({type:c,id:n.getId(l),currentTime:s,volume:u,muted:d})},r.media||500),i=[ee("play",o(me.Play)),ee("pause",o(me.Pause)),ee("seeked",o(me.Seeked)),ee("volumechange",o(me.VolumeChange))];return()=>{i.forEach(c=>c())}}function Wr({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],o=new WeakMap,i=n.FontFace;n.FontFace=function(a,l,s){const u=new i(a,l,s);return o.set(u,{family:a,buffer:typeof l!="string",descriptors:s,fontSource:typeof l=="string"?l:JSON.stringify(Array.from(new Uint8Array(l)))}),u};const c=he(t.fonts,"add",function(a){return function(l){return setTimeout(()=>{const s=o.get(l);s&&(e(s),o.delete(l))},0),a.apply(this,[l])}});return r.push(()=>{n.FontFace=i}),r.push(c),()=>{r.forEach(a=>a())}}function $r(e,t){const{mutationCb:n,mousemoveCb:r,mouseInteractionCb:o,scrollCb:i,viewportResizeCb:c,inputCb:a,mediaInteractionCb:l,styleSheetRuleCb:s,styleDeclarationCb:u,canvasMutationCb:d,fontCb:m}=e;e.mutationCb=(...h)=>{t.mutation&&t.mutation(...h),n(...h)},e.mousemoveCb=(...h)=>{t.mousemove&&t.mousemove(...h),r(...h)},e.mouseInteractionCb=(...h)=>{t.mouseInteraction&&t.mouseInteraction(...h),o(...h)},e.scrollCb=(...h)=>{t.scroll&&t.scroll(...h),i(...h)},e.viewportResizeCb=(...h)=>{t.viewportResize&&t.viewportResize(...h),c(...h)},e.inputCb=(...h)=>{t.input&&t.input(...h),a(...h)},e.mediaInteractionCb=(...h)=>{t.mediaInteaction&&t.mediaInteaction(...h),l(...h)},e.styleSheetRuleCb=(...h)=>{t.styleSheetRule&&t.styleSheetRule(...h),s(...h)},e.styleDeclarationCb=(...h)=>{t.styleDeclaration&&t.styleDeclaration(...h),u(...h)},e.canvasMutationCb=(...h)=>{t.canvasMutation&&t.canvasMutation(...h),d(...h)},e.fontCb=(...h)=>{t.font&&t.font(...h),m(...h)}}function Vr(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};$r(e,t);const r=zt(e,e.doc),o=kr(e),i=Rr(e),c=Yt(e),a=Or(e),l=Lr(e),s=Pr(e),u=Fr(e,{win:n}),d=_r(e,{win:n}),m=e.collectFonts?Wr(e):()=>{},h=[];for(const f of e.plugins)h.push(f.observer(f.callback,n,f.options));return()=>{pe.forEach(f=>f.reset()),r.disconnect(),o(),i(),c(),a(),l(),s(),u(),d(),m(),h.forEach(f=>f())}}class Ur{constructor(t){this.iframes=new WeakMap,this.mutationCb=t.mutationCb}addIframe(t){this.iframes.set(t,!0)}addLoadListener(t){this.loadListener=t}attachIframe(t,n,r){var o;this.mutationCb({adds:[{parentId:r.getId(t),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),(o=this.loadListener)==null||o.call(this,t)}}var jr=Object.defineProperty,Br=Object.defineProperties,Gr=Object.getOwnPropertyDescriptors,Zt=Object.getOwnPropertySymbols,zr=Object.prototype.hasOwnProperty,Yr=Object.prototype.propertyIsEnumerable,Kt=(e,t,n)=>t in e?jr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qt=(e,t)=>{for(var n in t||(t={}))zr.call(t,n)&&Kt(e,n,t[n]);if(Zt)for(var n of Zt(t))Yr.call(t,n)&&Kt(e,n,t[n]);return e},Jt=(e,t)=>Br(e,Gr(t));class Hr{constructor(t){this.restorePatches=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror;const n=this;this.restorePatches.push(he(HTMLElement.prototype,"attachShadow",function(r){return function(o){const i=r.call(this,o);return this.shadowRoot&&n.addShadowRoot(this.shadowRoot,this.ownerDocument),i}}))}addShadowRoot(t,n){zt(Jt(Qt({},this.bypassOptions),{doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),t),Yt(Jt(Qt({},this.bypassOptions),{scrollCb:this.scrollCb,doc:t,mirror:this.mirror}))}observeAttachShadow(t){if(t.contentWindow){const n=this;this.restorePatches.push(he(t.contentWindow.HTMLElement.prototype,"attachShadow",function(r){return function(o){const i=r.call(this,o);return this.shadowRoot&&n.addShadowRoot(this.shadowRoot,t.contentDocument),i}}))}}reset(){this.restorePatches.forEach(t=>t())}}for(var Ne="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ae=typeof Uint8Array>"u"?[]:new Uint8Array(256),Be=0;Be<Ne.length;Be++)Ae[Ne.charCodeAt(Be)]=Be;var Xr=function(e){var t=new Uint8Array(e),n,r=t.length,o="";for(n=0;n<r;n+=3)o+=Ne[t[n]>>2],o+=Ne[(t[n]&3)<<4|t[n+1]>>4],o+=Ne[(t[n+1]&15)<<2|t[n+2]>>6],o+=Ne[t[n+2]&63];return r%3===2?o=o.substring(0,o.length-1)+"=":r%3===1&&(o=o.substring(0,o.length-2)+"=="),o},Zr=function(e){var t=e.length*.75,n=e.length,r,o=0,i,c,a,l;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var s=new ArrayBuffer(t),u=new Uint8Array(s);for(r=0;r<n;r+=4)i=Ae[e.charCodeAt(r)],c=Ae[e.charCodeAt(r+1)],a=Ae[e.charCodeAt(r+2)],l=Ae[e.charCodeAt(r+3)],u[o++]=i<<2|c>>4,u[o++]=(c&15)<<4|a>>2,u[o++]=(a&3)<<6|l&63;return s};const qt=new Map;function Kr(e,t){let n=qt.get(e);return n||(n=new Map,qt.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}const en=(e,t,n)=>{if(!e||!(nn(e,t)||typeof e=="object"))return;const r=e.constructor.name,o=Kr(n,r);let i=o.indexOf(e);return i===-1&&(i=o.length,o.push(e)),i};function Ge(e,t,n){if(e instanceof Array)return e.map(r=>Ge(r,t,n));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){const r=e.constructor.name,o=Xr(e);return{rr_type:r,base64:o}}else{if(e instanceof DataView)return{rr_type:e.constructor.name,args:[Ge(e.buffer,t,n),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){const r=e.constructor.name,{src:o}=e;return{rr_type:r,src:o}}else if(e instanceof HTMLCanvasElement){const r="HTMLImageElement",o=e.toDataURL();return{rr_type:r,src:o}}else{if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[Ge(e.data,t,n),e.width,e.height]};if(nn(e,t)||typeof e=="object"){const r=e.constructor.name,o=en(e,t,n);return{rr_type:r,index:o}}}}return e}const tn=(e,t,n)=>[...e].map(r=>Ge(r,t,n)),nn=(e,t)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(r=>typeof t[r]=="function");return Boolean(n.find(r=>e instanceof t[r]))};function Qr(e,t,n,r){const o=[],i=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const c of i)try{if(typeof t.CanvasRenderingContext2D.prototype[c]!="function")continue;const a=he(t.CanvasRenderingContext2D.prototype,c,function(l){return function(...s){return te(this.canvas,n,!0)||setTimeout(()=>{const u=tn([...s],t,this);e(this.canvas,{type:ue["2D"],property:c,args:u})},0),l.apply(this,s)}});o.push(a)}catch{const l=ke(t.CanvasRenderingContext2D.prototype,c,{set(s){e(this.canvas,{type:ue["2D"],property:c,args:[s],setter:!0})}});o.push(l)}return()=>{o.forEach(c=>c())}}function rn(e,t){const n=[];try{const r=he(e.HTMLCanvasElement.prototype,"getContext",function(o){return function(i,...c){return te(this,t,!0)||"__context"in this||(this.__context=i),o.apply(this,[i,...c])}});n.push(r)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{n.forEach(r=>r())}}function on(e,t,n,r,o,i){const c=[],a=Object.getOwnPropertyNames(e);for(const l of a)try{if(typeof e[l]!="function")continue;const s=he(e,l,function(u){return function(...d){const m=u.apply(this,d);if(en(m,i,e),!te(this.canvas,r,!0)){const h=tn([...d],i,e),f={type:t,property:l,args:h};n(this.canvas,f)}return m}});c.push(s)}catch{const u=ke(e,l,{set(d){n(this.canvas,{type:t,property:l,args:[d],setter:!0})}});c.push(u)}return c}function Jr(e,t,n,r){const o=[];return o.push(...on(t.WebGLRenderingContext.prototype,ue.WebGL,e,n,r,t)),typeof t.WebGL2RenderingContext<"u"&&o.push(...on(t.WebGL2RenderingContext.prototype,ue.WebGL2,e,n,r,t)),()=>{o.forEach(i=>i())}}function qr(e,t){var n=atob(e);if(t){for(var r=new Uint8Array(n.length),o=0,i=n.length;o<i;++o)r[o]=n.charCodeAt(o);return String.fromCharCode.apply(null,new Uint16Array(r.buffer))}return n}function eo(e,t,n){var r=t===void 0?null:t,o=n===void 0?!1:n,i=qr(e,o),c=i.indexOf(`
`,10)+1,a=i.substring(c)+(r?"//# sourceMappingURL="+r:""),l=new Blob([a],{type:"application/javascript"});return URL.createObjectURL(l)}function to(e,t,n){var r;return function(i){return r=r||eo(e,t,n),new Worker(r,i)}}var no=to("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Zm9yKHZhciByPSJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvIixsPXR5cGVvZiBVaW50OEFycmF5PiJ1Ij9bXTpuZXcgVWludDhBcnJheSgyNTYpLGY9MDtmPHIubGVuZ3RoO2YrKylsW3IuY2hhckNvZGVBdChmKV09Zjt2YXIgZD1mdW5jdGlvbihzKXt2YXIgZT1uZXcgVWludDhBcnJheShzKSxuLGE9ZS5sZW5ndGgsdD0iIjtmb3Iobj0wO248YTtuKz0zKXQrPXJbZVtuXT4+Ml0sdCs9clsoZVtuXSYzKTw8NHxlW24rMV0+PjRdLHQrPXJbKGVbbisxXSYxNSk8PDJ8ZVtuKzJdPj42XSx0Kz1yW2VbbisyXSY2M107cmV0dXJuIGElMz09PTI/dD10LnN1YnN0cmluZygwLHQubGVuZ3RoLTEpKyI9IjphJTM9PT0xJiYodD10LnN1YnN0cmluZygwLHQubGVuZ3RoLTIpKyI9PSIpLHR9O2NvbnN0IGM9bmV3IE1hcCx1PW5ldyBNYXA7YXN5bmMgZnVuY3Rpb24gcChzLGUpe2NvbnN0IG49YCR7c30tJHtlfWA7aWYodS5oYXMobikpcmV0dXJuIHUuZ2V0KG4pO2NvbnN0IGE9bmV3IE9mZnNjcmVlbkNhbnZhcyhzLGUpO2EuZ2V0Q29udGV4dCgiMmQiKTtjb25zdCB0PWF3YWl0KGF3YWl0IGEuY29udmVydFRvQmxvYigpKS5hcnJheUJ1ZmZlcigpLGc9ZCh0KTtyZXR1cm4gdS5zZXQobixnKSxnfWNvbnN0IGk9c2VsZjtpLm9ubWVzc2FnZT1hc3luYyBmdW5jdGlvbihzKXtpZighKCJPZmZzY3JlZW5DYW52YXMiaW4gZ2xvYmFsVGhpcykpcmV0dXJuIGkucG9zdE1lc3NhZ2Uoe2lkOnMuZGF0YS5pZH0pO2NvbnN0e2lkOmUsYml0bWFwOm4sd2lkdGg6YSxoZWlnaHQ6dH09cy5kYXRhLGc9cChhLHQpLGg9bmV3IE9mZnNjcmVlbkNhbnZhcyhhLHQpO2guZ2V0Q29udGV4dCgiMmQiKS5kcmF3SW1hZ2UobiwwLDApLG4uY2xvc2UoKTtjb25zdCB3PWF3YWl0IGguY29udmVydFRvQmxvYigpLHk9dy50eXBlLGI9YXdhaXQgdy5hcnJheUJ1ZmZlcigpLG89ZChiKTtpZighYy5oYXMoZSkmJmF3YWl0IGc9PT1vKXJldHVybiBjLnNldChlLG8pLGkucG9zdE1lc3NhZ2Uoe2lkOmV9KTtpZihjLmdldChlKT09PW8pcmV0dXJuIGkucG9zdE1lc3NhZ2Uoe2lkOmV9KTtpLnBvc3RNZXNzYWdlKHtpZDplLHR5cGU6eSxiYXNlNjQ6byx3aWR0aDphLGhlaWdodDp0fSksYy5zZXQoZSxvKX19KSgpOwoK",null,!1),sn=Object.getOwnPropertySymbols,ro=Object.prototype.hasOwnProperty,oo=Object.prototype.propertyIsEnumerable,so=(e,t)=>{var n={};for(var r in e)ro.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&sn)for(var r of sn(e))t.indexOf(r)<0&&oo.call(e,r)&&(n[r]=e[r]);return n},io=(e,t,n)=>new Promise((r,o)=>{var i=l=>{try{a(n.next(l))}catch(s){o(s)}},c=l=>{try{a(n.throw(l))}catch(s){o(s)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,c);a((n=n.apply(e,t)).next())});class ao{constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(c,a)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(c)||this.pendingCanvasMutations.set(c,[]),this.pendingCanvasMutations.get(c).push(a)};const{sampling:n="all",win:r,blockClass:o,recordCanvas:i}=t;this.mutationCb=t.mutationCb,this.mirror=t.mirror,i&&n==="all"&&this.initCanvasMutationObserver(r,o),i&&typeof n=="number"&&this.initCanvasFPSObserver(n,r,o)}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(t,n,r){const o=rn(n,r),i=new Map,c=new no;c.onmessage=d=>{const{id:m}=d.data;if(i.set(m,!1),!("base64"in d.data))return;const{base64:h,type:f,width:y,height:S}=d.data;this.mutationCb({id:m,type:ue["2D"],commands:[{property:"clearRect",args:[0,0,y,S]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:h}],type:f}]},0,0]}]})};const a=1e3/t;let l=0,s;const u=d=>{if(l&&d-l<a){s=requestAnimationFrame(u);return}l=d,n.document.querySelectorAll(`canvas:not(.${r} *)`).forEach(m=>io(this,null,function*(){var h;const f=this.mirror.getId(m);if(i.get(f))return;if(i.set(f,!0),["webgl","webgl2"].includes(m.__context)){const S=m.getContext(m.__context);((h=S?.getContextAttributes())==null?void 0:h.preserveDrawingBuffer)===!1&&S?.clear(S.COLOR_BUFFER_BIT)}const y=yield createImageBitmap(m);c.postMessage({id:f,bitmap:y,width:m.width,height:m.height},[y])})),s=requestAnimationFrame(u)};s=requestAnimationFrame(u),this.resetObservers=()=>{o(),cancelAnimationFrame(s)}}initCanvasMutationObserver(t,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const r=rn(t,n),o=Qr(this.processMutation.bind(this),t,n,this.mirror),i=Jr(this.processMutation.bind(this),t,n,this.mirror);this.resetObservers=()=>{r(),o(),i()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const t=n=>{this.rafStamps.latestId=n,requestAnimationFrame(t)};requestAnimationFrame(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,n)=>{const r=this.mirror.getId(n);this.flushPendingCanvasMutationFor(n,r)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,n){if(this.frozen||this.locked)return;const r=this.pendingCanvasMutations.get(t);if(!r||n===-1)return;const o=r.map(c=>so(c,["type"])),{type:i}=r[0];this.mutationCb({id:n,type:i,commands:o}),this.pendingCanvasMutations.delete(t)}}class lo{constructor(t){this.trackedStylesheets=new WeakSet,this.mutationCb=t.mutationCb}addStylesheet(t){this.trackedStylesheets.has(t)||(this.trackedStylesheets.add(t),this.trackStylesheet(t))}trackStylesheet(t){}attachStylesheet(t,n,r){this.mutationCb({adds:[{parentId:r.getId(t),nextId:null,node:n}],removes:[],texts:[],attributes:[]}),this.addStylesheet(t)}}var co=Object.defineProperty,uo=Object.defineProperties,ho=Object.getOwnPropertyDescriptors,an=Object.getOwnPropertySymbols,mo=Object.prototype.hasOwnProperty,po=Object.prototype.propertyIsEnumerable,ln=(e,t,n)=>t in e?co(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ne=(e,t)=>{for(var n in t||(t={}))mo.call(t,n)&&ln(e,n,t[n]);if(an)for(var n of an(t))po.call(t,n)&&ln(e,n,t[n]);return e},fo=(e,t)=>uo(e,ho(t));function Y(e){return fo(ne({},e),{timestamp:Date.now()})}let j,Le;const ie=bt();function fe(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:i=null,ignoreClass:c="rr-ignore",maskTextClass:a="rr-mask",maskTextSelector:l=null,inlineStylesheet:s=!0,maskAllInputs:u,maskInputOptions:d,slimDOMOptions:m,maskInputFn:h,maskTextFn:f,hooks:y,packFn:S,sampling:p={},mousemoveWait:b,recordCanvas:v=!1,userTriggeredOnInput:C=!1,collectFonts:O=!1,inlineImages:R=!1,plugins:_,keepIframeSrcFn:F=()=>!1}=e;if(!t)throw new Error("emit function is required");b!==void 0&&p.mousemove===void 0&&(p.mousemove=b),ie.reset();const q=u===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:d!==void 0?d:{password:!0},H=m===!0||m==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:m==="all",headMetaDescKeywords:m==="all"}:m||{};tt();let G,Z=0;const W=N=>{for(const T of _||[])T.eventProcessor&&(N=T.eventProcessor(N));return S&&(N=S(N)),N};j=(N,T)=>{var P;if(((P=pe[0])==null?void 0:P.isFrozen())&&N.type!==E.FullSnapshot&&!(N.type===E.IncrementalSnapshot&&N.data.source===I.Mutation)&&pe.forEach(U=>U.unfreeze()),t(W(N),T),N.type===E.FullSnapshot)G=N,Z=0;else if(N.type===E.IncrementalSnapshot){if(N.data.source===I.Mutation&&N.data.isAttachIframe)return;Z++;const U=r&&Z>=r,se=n&&N.timestamp-G.timestamp>n;(U||se)&&Le(!0)}};const K=N=>{j(Y({type:E.IncrementalSnapshot,data:ne({source:I.Mutation},N)}))},Q=N=>j(Y({type:E.IncrementalSnapshot,data:ne({source:I.Scroll},N)})),z=N=>j(Y({type:E.IncrementalSnapshot,data:ne({source:I.CanvasMutation},N)})),k=new Ur({mutationCb:K}),X=new lo({mutationCb:K}),w=new ao({recordCanvas:v,mutationCb:z,win:window,blockClass:o,mirror:ie,sampling:p.canvas}),g=new Hr({mutationCb:K,scrollCb:Q,bypassOptions:{blockClass:o,blockSelector:i,maskTextClass:a,maskTextSelector:l,inlineStylesheet:s,maskInputOptions:q,maskTextFn:f,maskInputFn:h,recordCanvas:v,inlineImages:R,sampling:p,slimDOMOptions:H,iframeManager:k,stylesheetManager:X,canvasManager:w},mirror:ie});Le=(N=!1)=>{var T,P,U,se;j(Y({type:E.Meta,data:{href:window.location.href,width:Je(),height:Qe()}}),N),pe.forEach($=>$.lock());const A=hr(document,{mirror:ie,blockClass:o,blockSelector:i,maskTextClass:a,maskTextSelector:l,inlineStylesheet:s,maskAllInputs:q,maskTextFn:f,slimDOM:H,recordCanvas:v,inlineImages:R,onSerialize:$=>{Se($,ie)&&k.addIframe($),rt($,ie)&&X.addStylesheet($),Re($)&&g.addShadowRoot($.shadowRoot,document)},onIframeLoad:($,le)=>{k.attachIframe($,le,ie),g.observeAttachShadow($)},onStylesheetLoad:($,le)=>{X.attachStylesheet($,le,ie)},keepIframeSrcFn:F});if(!A)return console.warn("Failed to snapshot the document");j(Y({type:E.FullSnapshot,data:{node:A,initialOffset:{left:window.pageXOffset!==void 0?window.pageXOffset:document?.documentElement.scrollLeft||((P=(T=document?.body)==null?void 0:T.parentElement)==null?void 0:P.scrollLeft)||document?.body.scrollLeft||0,top:window.pageYOffset!==void 0?window.pageYOffset:document?.documentElement.scrollTop||((se=(U=document?.body)==null?void 0:U.parentElement)==null?void 0:se.scrollTop)||document?.body.scrollTop||0}}})),pe.forEach($=>$.unlock())};try{const N=[];N.push(ee("DOMContentLoaded",()=>{j(Y({type:E.DomContentLoaded,data:{}}))}));const T=U=>{var se;return Vr({mutationCb:K,mousemoveCb:(A,$)=>j(Y({type:E.IncrementalSnapshot,data:{source:$,positions:A}})),mouseInteractionCb:A=>j(Y({type:E.IncrementalSnapshot,data:ne({source:I.MouseInteraction},A)})),scrollCb:Q,viewportResizeCb:A=>j(Y({type:E.IncrementalSnapshot,data:ne({source:I.ViewportResize},A)})),inputCb:A=>j(Y({type:E.IncrementalSnapshot,data:ne({source:I.Input},A)})),mediaInteractionCb:A=>j(Y({type:E.IncrementalSnapshot,data:ne({source:I.MediaInteraction},A)})),styleSheetRuleCb:A=>j(Y({type:E.IncrementalSnapshot,data:ne({source:I.StyleSheetRule},A)})),styleDeclarationCb:A=>j(Y({type:E.IncrementalSnapshot,data:ne({source:I.StyleDeclaration},A)})),canvasMutationCb:z,fontCb:A=>j(Y({type:E.IncrementalSnapshot,data:ne({source:I.Font},A)})),blockClass:o,ignoreClass:c,maskTextClass:a,maskTextSelector:l,maskInputOptions:q,inlineStylesheet:s,sampling:p,recordCanvas:v,inlineImages:R,userTriggeredOnInput:C,collectFonts:O,doc:U,maskInputFn:h,maskTextFn:f,blockSelector:i,slimDOMOptions:H,mirror:ie,iframeManager:k,stylesheetManager:X,shadowDomManager:g,canvasManager:w,plugins:((se=_?.filter(A=>A.observer))==null?void 0:se.map(A=>({observer:A.observer,options:A.options,callback:$=>j(Y({type:E.Plugin,data:{plugin:A.name,payload:$}}))})))||[]},y)};k.addLoadListener(U=>{N.push(T(U.contentDocument))});const P=()=>{Le(),N.push(T(document))};return document.readyState==="interactive"||document.readyState==="complete"?P():N.push(ee("load",()=>{j(Y({type:E.Load,data:{}})),P()},window)),()=>{N.forEach(U=>U())}}catch(N){console.warn(N)}}fe.addCustomEvent=(e,t)=>{if(!j)throw new Error("please add custom event after start recording");j(Y({type:E.Custom,data:{tag:e,payload:t}}))},fe.freezePage=()=>{pe.forEach(e=>e.freeze())},fe.takeFullSnapshot=e=>{if(!Le)throw new Error("please take full snapshot after start recording");Le(e)},fe.mirror=ie;var x;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(x||(x={}));var yo=function(){function e(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return e.prototype.getId=function(t){var n;if(!t)return-1;var r=(n=this.getMeta(t))===null||n===void 0?void 0:n.id;return r??-1},e.prototype.getNode=function(t){return this.idNodeMap.get(t)||null},e.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},e.prototype.getMeta=function(t){return this.nodeMetaMap.get(t)||null},e.prototype.removeNodeFromMap=function(t){var n=this,r=this.getId(t);this.idNodeMap.delete(r),t.childNodes&&t.childNodes.forEach(function(o){return n.removeNodeFromMap(o)})},e.prototype.has=function(t){return this.idNodeMap.has(t)},e.prototype.hasNode=function(t){return this.nodeMetaMap.has(t)},e.prototype.add=function(t,n){var r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)},e.prototype.replace=function(t,n){this.idNodeMap.set(t,n)},e.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},e}();function go(){return new yo}function vo(e){const t={},n=/;(?![^(]*\))/g,r=/:(.+)/,o=/\/\*.*?\*\//g;return e.replace(o,"").split(n).forEach(function(i){if(i){const c=i.split(r);c.length>1&&(t[at(c[0].trim())]=c[1].trim())}}),t}function cn(e){const t=[];for(const n in e){const r=e[n];if(typeof r!="string")continue;const o=No(n);t.push(`${o}: ${r};`)}return t.join(" ")}const bo=/-([a-z])/g,So=/^--[a-zA-Z0-9-]+$/,at=e=>So.test(e)?e:e.replace(bo,(t,n)=>n?n.toUpperCase():""),wo=/\B([A-Z])/g,No=e=>e.replace(wo,"-$1").toLowerCase();class re{constructor(...t){this.childNodes=[],this.parentElement=null,this.parentNode=null,this.ELEMENT_NODE=V.ELEMENT_NODE,this.TEXT_NODE=V.TEXT_NODE}get firstChild(){return this.childNodes[0]||null}get lastChild(){return this.childNodes[this.childNodes.length-1]||null}get nextSibling(){const t=this.parentNode;if(!t)return null;const n=t.childNodes,r=n.indexOf(this);return n[r+1]||null}contains(t){if(t===this)return!0;for(const n of this.childNodes)if(n.contains(t))return!0;return!1}appendChild(t){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(t,n){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(t){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}}function To(e){return class Vn extends e{constructor(){super(...arguments),this.nodeType=V.DOCUMENT_NODE,this.nodeName="#document",this.compatMode="CSS1Compat",this.RRNodeType=x.Document,this.textContent=null}get documentElement(){return this.childNodes.find(n=>n.RRNodeType===x.Element&&n.tagName==="HTML")||null}get body(){var n;return((n=this.documentElement)===null||n===void 0?void 0:n.childNodes.find(r=>r.RRNodeType===x.Element&&r.tagName==="BODY"))||null}get head(){var n;return((n=this.documentElement)===null||n===void 0?void 0:n.childNodes.find(r=>r.RRNodeType===x.Element&&r.tagName==="HEAD"))||null}get implementation(){return this}get firstElementChild(){return this.documentElement}appendChild(n){const r=n.RRNodeType;if((r===x.Element||r===x.DocumentType)&&this.childNodes.some(o=>o.RRNodeType===r))throw new Error(`RRDomException: Failed to execute 'appendChild' on 'RRNode': Only one ${r===x.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);return n.parentElement=null,n.parentNode=this,this.childNodes.push(n),n}insertBefore(n,r){const o=n.RRNodeType;if((o===x.Element||o===x.DocumentType)&&this.childNodes.some(c=>c.RRNodeType===o))throw new Error(`RRDomException: Failed to execute 'insertBefore' on 'RRNode': Only one ${o===x.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);if(r===null)return this.appendChild(n);const i=this.childNodes.indexOf(r);if(i==-1)throw new Error("Failed to execute 'insertBefore' on 'RRNode': The RRNode before which the new node is to be inserted is not a child of this RRNode.");return this.childNodes.splice(i,0,n),n.parentElement=null,n.parentNode=this,n}removeChild(n){const r=this.childNodes.indexOf(n);if(r===-1)throw new Error("Failed to execute 'removeChild' on 'RRDocument': The RRNode to be removed is not a child of this RRNode.");return this.childNodes.splice(r,1),n.parentElement=null,n.parentNode=null,n}open(){this.childNodes=[]}close(){}write(n){let r;if(n==='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'?r="-//W3C//DTD XHTML 1.0 Transitional//EN":n==='<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">'&&(r="-//W3C//DTD HTML 4.0 Transitional//EN"),r){const o=this.createDocumentType("html",r,"");this.open(),this.appendChild(o)}}createDocument(n,r,o){return new Vn}createDocumentType(n,r,o){const i=new(un(re))(n,r,o);return i.ownerDocument=this,i}createElement(n){const r=new(dn(re))(n);return r.ownerDocument=this,r}createElementNS(n,r){return this.createElement(r)}createTextNode(n){const r=new(hn(re))(n);return r.ownerDocument=this,r}createComment(n){const r=new(mn(re))(n);return r.ownerDocument=this,r}createCDATASection(n){const r=new(pn(re))(n);return r.ownerDocument=this,r}toString(){return"RRDocument"}}}function un(e){return class extends e{constructor(t,n,r){super(),this.nodeType=V.DOCUMENT_TYPE_NODE,this.RRNodeType=x.DocumentType,this.textContent=null,this.name=t,this.publicId=n,this.systemId=r,this.nodeName=t}toString(){return"RRDocumentType"}}}function dn(e){return class extends e{constructor(t){super(),this.nodeType=V.ELEMENT_NODE,this.RRNodeType=x.Element,this.attributes={},this.shadowRoot=null,this.tagName=t.toUpperCase(),this.nodeName=t.toUpperCase()}get textContent(){let t="";return this.childNodes.forEach(n=>t+=n.textContent),t}set textContent(t){this.childNodes=[this.ownerDocument.createTextNode(t)]}get classList(){return new Co(this.attributes.class,t=>{this.attributes.class=t})}get id(){return this.attributes.id||""}get className(){return this.attributes.class||""}get style(){const t=this.attributes.style?vo(this.attributes.style):{},n=/\B([A-Z])/g;return t.setProperty=(r,o,i)=>{if(n.test(r))return;const c=at(r);o?t[c]=o:delete t[c],i==="important"&&(t[c]+=" !important"),this.attributes.style=cn(t)},t.removeProperty=r=>{if(n.test(r))return"";const o=at(r),i=t[o]||"";return delete t[o],this.attributes.style=cn(t),i},t}getAttribute(t){return this.attributes[t]||null}setAttribute(t,n){this.attributes[t]=n}setAttributeNS(t,n,r){this.setAttribute(n,r)}removeAttribute(t){delete this.attributes[t]}appendChild(t){return this.childNodes.push(t),t.parentNode=this,t.parentElement=this,t}insertBefore(t,n){if(n===null)return this.appendChild(t);const r=this.childNodes.indexOf(n);if(r==-1)throw new Error("Failed to execute 'insertBefore' on 'RRNode': The RRNode before which the new node is to be inserted is not a child of this RRNode.");return this.childNodes.splice(r,0,t),t.parentElement=this,t.parentNode=this,t}removeChild(t){const n=this.childNodes.indexOf(t);if(n===-1)throw new Error("Failed to execute 'removeChild' on 'RRElement': The RRNode to be removed is not a child of this RRNode.");return this.childNodes.splice(n,1),t.parentElement=null,t.parentNode=null,t}attachShadow(t){const n=this.ownerDocument.createElement("SHADOWROOT");return this.shadowRoot=n,n}dispatchEvent(t){return!0}toString(){let t="";for(const n in this.attributes)t+=`${n}="${this.attributes[n]}" `;return`${this.tagName} ${t}`}}}function Eo(e){return class extends e{attachShadow(t){throw new Error("RRDomException: Failed to execute 'attachShadow' on 'RRElement': This RRElement does not support attachShadow")}play(){this.paused=!1}pause(){this.paused=!0}}}function hn(e){return class extends e{constructor(t){super(),this.nodeType=V.TEXT_NODE,this.nodeName="#text",this.RRNodeType=x.Text,this.data=t}get textContent(){return this.data}set textContent(t){this.data=t}toString(){return`RRText text=${JSON.stringify(this.data)}`}}}function mn(e){return class extends e{constructor(t){super(),this.nodeType=V.COMMENT_NODE,this.nodeName="#comment",this.RRNodeType=x.Comment,this.data=t}get textContent(){return this.data}set textContent(t){this.data=t}toString(){return`RRComment text=${JSON.stringify(this.data)}`}}}function pn(e){return class extends e{constructor(t){super(),this.nodeName="#cdata-section",this.nodeType=V.CDATA_SECTION_NODE,this.RRNodeType=x.CDATA,this.data=t}get textContent(){return this.data}set textContent(t){this.data=t}toString(){return`RRCDATASection data=${JSON.stringify(this.data)}`}}}class Co{constructor(t,n){if(this.classes=[],this.add=(...r)=>{for(const o of r){const i=String(o);this.classes.indexOf(i)>=0||this.classes.push(i)}this.onChange&&this.onChange(this.classes.join(" "))},this.remove=(...r)=>{this.classes=this.classes.filter(o=>r.indexOf(o)===-1),this.onChange&&this.onChange(this.classes.join(" "))},t){const r=t.trim().split(/\s+/);this.classes.push(...r)}this.onChange=n}}var V;(function(e){e[e.PLACEHOLDER=0]="PLACEHOLDER",e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",e[e.ENTITY_REFERENCE_NODE=5]="ENTITY_REFERENCE_NODE",e[e.ENTITY_NODE=6]="ENTITY_NODE",e[e.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE",e[e.DOCUMENT_NODE=9]="DOCUMENT_NODE",e[e.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",e[e.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE"})(V||(V={}));const lt={svg:"http://www.w3.org/2000/svg","xlink:href":"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/xmlns/"},Io={altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};function ae(e,t,n,r){const o=e.childNodes,i=t.childNodes;r=r||t.mirror||t.ownerDocument.mirror,(o.length>0||i.length>0)&&fn(Array.from(o),i,e,n,r);let c=null,a=null;switch(t.RRNodeType){case x.Document:{a=t.scrollData;break}case x.Element:{const l=e,s=t;switch(Mo(l,s,r),a=s.scrollData,c=s.inputData,s.tagName){case"AUDIO":case"VIDEO":{const u=e,d=s;d.paused!==void 0&&(d.paused?u.pause():u.play()),d.muted!==void 0&&(u.muted=d.muted),d.volume!==void 0&&(u.volume=d.volume),d.currentTime!==void 0&&(u.currentTime=d.currentTime);break}case"CANVAS":t.canvasMutations.forEach(u=>n.applyCanvas(u.event,u.mutation,e));break;case"STYLE":xo(l,t.rules);break}if(s.shadowRoot){l.shadowRoot||l.attachShadow({mode:"open"});const u=l.shadowRoot.childNodes,d=s.shadowRoot.childNodes;(u.length>0||d.length>0)&&fn(Array.from(u),d,l.shadowRoot,n,r)}break}case x.Text:case x.Comment:case x.CDATA:e.textContent!==t.data&&(e.textContent=t.data);break}if(a&&n.applyScroll(a,!0),c&&n.applyInput(c),t.nodeName==="IFRAME"){const l=e.contentDocument,s=t;if(l){const u=r.getMeta(s.contentDocument);u&&n.mirror.add(l,Object.assign({},u)),ae(l,s.contentDocument,n,r)}}}function Mo(e,t,n){const r=e.attributes,o=t.attributes;for(const i in o){const c=o[i],a=n.getMeta(t);if(a&&"isSVG"in a&&a.isSVG&&lt[i])e.setAttributeNS(lt[i],i,c);else if(t.tagName==="CANVAS"&&i==="rr_dataURL"){const l=document.createElement("img");l.src=c,l.onload=()=>{const s=e.getContext("2d");s&&s.drawImage(l,0,0,l.width,l.height)}}else e.setAttribute(i,c)}for(const{name:i}of Array.from(r))i in o||e.removeAttribute(i);t.scrollLeft&&(e.scrollLeft=t.scrollLeft),t.scrollTop&&(e.scrollTop=t.scrollTop)}function fn(e,t,n,r,o){var i;let c=0,a=e.length-1,l=0,s=t.length-1,u=e[c],d=e[a],m=t[l],h=t[s],f,y;for(;c<=a&&l<=s;)if(u===void 0)u=e[++c];else if(d===void 0)d=e[--a];else if(r.mirror.getId(u)===o.getId(m))ae(u,m,r,o),u=e[++c],m=t[++l];else if(r.mirror.getId(d)===o.getId(h))ae(d,h,r,o),d=e[--a],h=t[--s];else if(r.mirror.getId(u)===o.getId(h))n.insertBefore(u,d.nextSibling),ae(u,h,r,o),u=e[++c],h=t[--s];else if(r.mirror.getId(d)===o.getId(m))n.insertBefore(d,u),ae(d,m,r,o),d=e[--a],m=t[++l];else{if(!f){f={};for(let S=c;S<=a;S++){const p=e[S];p&&r.mirror.hasNode(p)&&(f[r.mirror.getId(p)]=S)}}if(y=f[o.getId(m)],y){const S=e[y];n.insertBefore(S,u),ae(S,m,r,o),e[y]=void 0}else{const S=ct(m,r.mirror,o);n.nodeName==="#document"&&((i=r.mirror.getMeta(S))===null||i===void 0?void 0:i.type)===x.Element&&n.documentElement&&(n.removeChild(n.documentElement),e[c]=void 0,u=void 0),n.insertBefore(S,u||null),ae(S,m,r,o)}m=t[++l]}if(c>a){const S=t[s+1];let p=null;for(S&&n.childNodes.forEach(b=>{r.mirror.getId(b)===o.getId(S)&&(p=b)});l<=s;++l){const b=ct(t[l],r.mirror,o);n.insertBefore(b,p),ae(b,t[l],r,o)}}else if(l>s)for(;c<=a;c++){const S=e[c];S&&(n.removeChild(S),r.mirror.removeNodeFromMap(S))}}function ct(e,t,n){let r=t.getNode(n.getId(e));const o=n.getMeta(e);if(r!==null)return r;switch(e.RRNodeType){case x.Document:r=new Document;break;case x.DocumentType:r=document.implementation.createDocumentType(e.name,e.publicId,e.systemId);break;case x.Element:{let i=e.tagName.toLowerCase();i=Io[i]||i,o&&"isSVG"in o&&o?.isSVG?r=document.createElementNS(lt.svg,i):r=document.createElement(e.tagName);break}case x.Text:r=document.createTextNode(e.data);break;case x.Comment:r=document.createComment(e.data);break;case x.CDATA:r=document.createCDATASection(e.data);break}return o&&t.add(r,Object.assign({},o)),r}function Fe(e,t){const n=e[t[0]];return t.length===1?n:Fe(n.cssRules[t[1]].cssRules,t.slice(2))}var oe;(function(e){e[e.Insert=0]="Insert",e[e.Remove=1]="Remove",e[e.Snapshot=2]="Snapshot",e[e.SetProperty=3]="SetProperty",e[e.RemoveProperty=4]="RemoveProperty"})(oe||(oe={}));function yn(e){const t=[...e],n=t.pop();return{positions:t,index:n}}function xo(e,t){const n=e.sheet;t.forEach(r=>{if(r.type===oe.Insert)try{if(Array.isArray(r.index)){const{positions:o,index:i}=yn(r.index);Fe(n.cssRules,o).insertRule(r.cssText,i)}else n.insertRule(r.cssText,r.index)}catch{}else if(r.type===oe.Remove)try{if(Array.isArray(r.index)){const{positions:o,index:i}=yn(r.index);Fe(n.cssRules,o).deleteRule(i||0)}else n.deleteRule(r.index)}catch{}else r.type===oe.SetProperty?Fe(n.cssRules,r.index).style.setProperty(r.property,r.value,r.priority):r.type===oe.RemoveProperty&&Fe(n.cssRules,r.index).style.removeProperty(r.property)})}class Te extends To(re){constructor(t){super(),this._unserializedId=-1,this.mirror=$o(),this.scrollData=null,t&&(this.mirror=t)}get unserializedId(){return this._unserializedId--}createDocument(t,n,r){return new Te}createDocumentType(t,n,r){const o=new Do(t,n,r);return o.ownerDocument=this,o}createElement(t){const n=t.toUpperCase();let r;switch(n){case"AUDIO":case"VIDEO":r=new ko(n);break;case"IFRAME":r=new Ao(n,this.mirror);break;case"CANVAS":r=new Ro(n);break;case"STYLE":r=new Oo(n);break;default:r=new _e(n);break}return r.ownerDocument=this,r}createComment(t){const n=new Fo(t);return n.ownerDocument=this,n}createCDATASection(t){const n=new _o(t);return n.ownerDocument=this,n}createTextNode(t){const n=new Lo(t);return n.ownerDocument=this,n}destroyTree(){this.childNodes=[],this.mirror.reset()}open(){super.open(),this._unserializedId=-1}}const Do=un(re);class _e extends dn(re){constructor(){super(...arguments),this.inputData=null,this.scrollData=null}}class ko extends Eo(_e){}class Ro extends _e{constructor(){super(...arguments),this.canvasMutations=[]}getContext(){return null}}class Oo extends _e{constructor(){super(...arguments),this.rules=[]}}class Ao extends _e{constructor(t,n){super(t),this.contentDocument=new Te,this.contentDocument.mirror=n}}const Lo=hn(re),Fo=mn(re),_o=pn(re);function Po(e){return e instanceof HTMLFormElement?"FORM":e.tagName.toUpperCase()}function gn(e,t,n,r){let o;switch(e.nodeType){case V.DOCUMENT_NODE:r&&r.nodeName==="IFRAME"?o=r.contentDocument:(o=t,o.compatMode=e.compatMode);break;case V.DOCUMENT_TYPE_NODE:{const c=e;o=t.createDocumentType(c.name,c.publicId,c.systemId);break}case V.ELEMENT_NODE:{const c=e,a=Po(c);o=t.createElement(a);const l=o;for(const{name:s,value:u}of Array.from(c.attributes))l.attributes[s]=u;c.scrollLeft&&(l.scrollLeft=c.scrollLeft),c.scrollTop&&(l.scrollTop=c.scrollTop);break}case V.TEXT_NODE:o=t.createTextNode(e.textContent||"");break;case V.CDATA_SECTION_NODE:o=t.createCDATASection(e.data);break;case V.COMMENT_NODE:o=t.createComment(e.textContent||"");break;case V.DOCUMENT_FRAGMENT_NODE:o=r.attachShadow({mode:"open"});break;default:return null}let i=n.getMeta(e);return t instanceof Te&&(i||(i=vn(o,t.unserializedId),n.add(e,i)),t.mirror.add(o,Object.assign({},i))),o}function Wo(e,t=go(),n=new Te){function r(o,i){const c=gn(o,n,t,i);c!==null&&(i?.nodeName!=="IFRAME"&&o.nodeType!==V.DOCUMENT_FRAGMENT_NODE&&(i?.appendChild(c),c.parentNode=i,c.parentElement=i),o.nodeName==="IFRAME"?r(o.contentDocument,c):(o.nodeType===V.DOCUMENT_NODE||o.nodeType===V.ELEMENT_NODE||o.nodeType===V.DOCUMENT_FRAGMENT_NODE)&&(o.nodeType===V.ELEMENT_NODE&&o.shadowRoot&&r(o.shadowRoot,c),o.childNodes.forEach(a=>r(a,c))))}return r(e,null),n}function $o(){return new Vo}class Vo{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(t){var n;if(!t)return-1;const r=(n=this.getMeta(t))===null||n===void 0?void 0:n.id;return r??-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){const r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function vn(e,t){switch(e.RRNodeType){case x.Document:return{id:t,type:e.RRNodeType,childNodes:[]};case x.DocumentType:{const n=e;return{id:t,type:e.RRNodeType,name:n.name,publicId:n.publicId,systemId:n.systemId}}case x.Element:return{id:t,type:e.RRNodeType,tagName:e.tagName.toLowerCase(),attributes:{},childNodes:[]};case x.Text:return{id:t,type:e.RRNodeType,textContent:e.textContent||""};case x.Comment:return{id:t,type:e.RRNodeType,textContent:e.textContent||""};case x.CDATA:return{id:t,type:e.RRNodeType,textContent:""}}}function bn(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(o){o(n)}),(r=e.get("*"))&&r.slice().map(function(o){o(t,n)})}}}var Uo=Object.freeze({__proto__:null,default:bn});function jo(e=window,t=document){if("scrollBehavior"in t.documentElement.style&&e.__forceSmoothScrollPolyfill__!==!0)return;const n=e.HTMLElement||e.Element,r=468,o={scroll:e.scroll||e.scrollTo,scrollBy:e.scrollBy,elementScroll:n.prototype.scroll||l,scrollIntoView:n.prototype.scrollIntoView},i=e.performance&&e.performance.now?e.performance.now.bind(e.performance):Date.now;function c(p){const b=["MSIE ","Trident/","Edge/"];return new RegExp(b.join("|")).test(p)}const a=c(e.navigator.userAgent)?1:0;function l(p,b){this.scrollLeft=p,this.scrollTop=b}function s(p){return .5*(1-Math.cos(Math.PI*p))}function u(p){if(p===null||typeof p!="object"||p.behavior===void 0||p.behavior==="auto"||p.behavior==="instant")return!0;if(typeof p=="object"&&p.behavior==="smooth")return!1;throw new TypeError("behavior member of ScrollOptions "+p.behavior+" is not a valid value for enumeration ScrollBehavior.")}function d(p,b){if(b==="Y")return p.clientHeight+a<p.scrollHeight;if(b==="X")return p.clientWidth+a<p.scrollWidth}function m(p,b){const v=e.getComputedStyle(p,null)["overflow"+b];return v==="auto"||v==="scroll"}function h(p){const b=d(p,"Y")&&m(p,"Y"),v=d(p,"X")&&m(p,"X");return b||v}function f(p){for(;p!==t.body&&h(p)===!1;)p=p.parentNode||p.host;return p}function y(p){const b=i();let v,C,O,R=(b-p.startTime)/r;R=R>1?1:R,v=s(R),C=p.startX+(p.x-p.startX)*v,O=p.startY+(p.y-p.startY)*v,p.method.call(p.scrollable,C,O),(C!==p.x||O!==p.y)&&e.requestAnimationFrame(y.bind(e,p))}function S(p,b,v){let C,O,R,_;const F=i();p===t.body?(C=e,O=e.scrollX||e.pageXOffset,R=e.scrollY||e.pageYOffset,_=o.scroll):(C=p,O=p.scrollLeft,R=p.scrollTop,_=l),y({scrollable:C,method:_,startTime:F,startX:O,startY:R,x:b,y:v})}e.scroll=e.scrollTo=function(){if(arguments[0]!==void 0){if(u(arguments[0])===!0){o.scroll.call(e,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:e.scrollX||e.pageXOffset,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:e.scrollY||e.pageYOffset);return}S.call(e,t.body,arguments[0].left!==void 0?~~arguments[0].left:e.scrollX||e.pageXOffset,arguments[0].top!==void 0?~~arguments[0].top:e.scrollY||e.pageYOffset)}},e.scrollBy=function(){if(arguments[0]!==void 0){if(u(arguments[0])){o.scrollBy.call(e,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:0,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:0);return}S.call(e,t.body,~~arguments[0].left+(e.scrollX||e.pageXOffset),~~arguments[0].top+(e.scrollY||e.pageYOffset))}},n.prototype.scroll=n.prototype.scrollTo=function(){if(arguments[0]===void 0)return;if(u(arguments[0])===!0){if(typeof arguments[0]=="number"&&arguments[1]===void 0)throw new SyntaxError("Value could not be converted");o.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left:typeof arguments[0]!="object"?~~arguments[0]:this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top:arguments[1]!==void 0?~~arguments[1]:this.scrollTop);return}const p=arguments[0].left,b=arguments[0].top;S.call(this,this,typeof p>"u"?this.scrollLeft:~~p,typeof b>"u"?this.scrollTop:~~b)},n.prototype.scrollBy=function(){if(arguments[0]!==void 0){if(u(arguments[0])===!0){o.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop);return}this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior})}},n.prototype.scrollIntoView=function(){if(u(arguments[0])===!0){o.scrollIntoView.call(this,arguments[0]===void 0?!0:arguments[0]);return}const p=f(this),b=p.getBoundingClientRect(),v=this.getBoundingClientRect();p!==t.body?(S.call(this,p,p.scrollLeft+v.left-b.left,p.scrollTop+v.top-b.top),e.getComputedStyle(p).position!=="fixed"&&e.scrollBy({left:b.left,top:b.top,behavior:"smooth"})):e.scrollBy({left:v.left,top:v.top,behavior:"smooth"})}}class Bo{constructor(t=[],n){this.timeOffset=0,this.raf=null,this.actions=t,this.speed=n}addAction(t){const n=this.findActionIndex(t);this.actions.splice(n,0,t)}addActions(t){this.actions=this.actions.concat(t)}start(){this.timeOffset=0;let t=performance.now();const{actions:n}=this,r=()=>{const o=performance.now();for(this.timeOffset+=(o-t)*this.speed,t=o;n.length;){const i=n[0];if(this.timeOffset>=i.delay)n.shift(),i.doAction();else break}(n.length>0||this.liveMode)&&(this.raf=requestAnimationFrame(r))};this.raf=requestAnimationFrame(r)}clear(){this.raf&&(cancelAnimationFrame(this.raf),this.raf=null),this.actions.length=0}setSpeed(t){this.speed=t}toggleLiveMode(t){this.liveMode=t}isActive(){return this.raf!==null}findActionIndex(t){let n=0,r=this.actions.length-1;for(;n<=r;){const o=Math.floor((n+r)/2);if(this.actions[o].delay<t.delay)n=o+1;else if(this.actions[o].delay>t.delay)r=o-1;else return o+1}return n}}function Sn(e,t){if(e.type===E.IncrementalSnapshot&&e.data.source===I.MouseMove){const n=e.data.positions[0].timeOffset,r=e.timestamp+n;return e.delay=r-t,r-t}return e.delay=e.timestamp-t,e.delay}/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function wn(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),c=[];try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)c.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return c}var Ee;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(Ee||(Ee={}));var Nn={type:"xstate.init"};function ut(e){return e===void 0?[]:[].concat(e)}function Ce(e){return{type:"xstate.assign",assignment:e}}function Tn(e,t){return typeof(e=typeof e=="string"&&t&&t[e]?t[e]:e)=="string"?{type:e}:typeof e=="function"?{type:e.name,exec:e}:e}function ze(e){return function(t){return e===t}}function En(e){return typeof e=="string"?{type:e}:e}function Cn(e,t){return{value:e,context:t,actions:[],changed:!1,matches:ze(e)}}function In(e,t,n){var r=t,o=!1;return[e.filter(function(i){if(i.type==="xstate.assign"){o=!0;var c=Object.assign({},r);return typeof i.assignment=="function"?c=i.assignment(r,n):Object.keys(i.assignment).forEach(function(a){c[a]=typeof i.assignment[a]=="function"?i.assignment[a](r,n):i.assignment[a]}),r=c,!1}return!0}),r,o]}function Mn(e,t){t===void 0&&(t={});var n=wn(In(ut(e.states[e.initial].entry).map(function(c){return Tn(c,t.actions)}),e.context,Nn),2),r=n[0],o=n[1],i={config:e,_options:t,initialState:{value:e.initial,actions:r,context:o,matches:ze(e.initial)},transition:function(c,a){var l,s,u=typeof c=="string"?{value:c,context:e.context}:c,d=u.value,m=u.context,h=En(a),f=e.states[d];if(f.on){var y=ut(f.on[h.type]);try{for(var S=function(k){var X=typeof Symbol=="function"&&Symbol.iterator,w=X&&k[X],g=0;if(w)return w.call(k);if(k&&typeof k.length=="number")return{next:function(){return k&&g>=k.length&&(k=void 0),{value:k&&k[g++],done:!k}}};throw new TypeError(X?"Object is not iterable.":"Symbol.iterator is not defined.")}(y),p=S.next();!p.done;p=S.next()){var b=p.value;if(b===void 0)return Cn(d,m);var v=typeof b=="string"?{target:b}:b,C=v.target,O=v.actions,R=O===void 0?[]:O,_=v.cond,F=_===void 0?function(){return!0}:_,q=C===void 0,H=C??d,G=e.states[H];if(F(m,h)){var Z=wn(In((q?ut(R):[].concat(f.exit,R,G.entry).filter(function(k){return k})).map(function(k){return Tn(k,i._options.actions)}),m,h),3),W=Z[0],K=Z[1],Q=Z[2],z=C??d;return{value:z,context:K,actions:W,changed:C!==d||W.length>0||Q,matches:ze(z)}}}}catch(k){l={error:k}}finally{try{p&&!p.done&&(s=S.return)&&s.call(S)}finally{if(l)throw l.error}}}return Cn(d,m)}};return i}var xn=function(e,t){return e.actions.forEach(function(n){var r=n.exec;return r&&r(e.context,t)})};function Dn(e){var t=e.initialState,n=Ee.NotStarted,r=new Set,o={_machine:e,send:function(i){n===Ee.Running&&(t=e.transition(t,i),xn(t,En(i)),r.forEach(function(c){return c(t)}))},subscribe:function(i){return r.add(i),i(t),{unsubscribe:function(){return r.delete(i)}}},start:function(i){if(i){var c=typeof i=="object"?i:{context:e.config.context,value:i};t={value:c.value,actions:[],context:c.context,matches:ze(c.value)}}return n=Ee.Running,xn(t,Nn),o},stop:function(){return n=Ee.Stopped,r.clear(),o},get state(){return t},get status(){return n}};return o}var Go=Object.defineProperty,zo=Object.defineProperties,Yo=Object.getOwnPropertyDescriptors,kn=Object.getOwnPropertySymbols,Ho=Object.prototype.hasOwnProperty,Xo=Object.prototype.propertyIsEnumerable,Rn=(e,t,n)=>t in e?Go(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dt=(e,t)=>{for(var n in t||(t={}))Ho.call(t,n)&&Rn(e,n,t[n]);if(kn)for(var n of kn(t))Xo.call(t,n)&&Rn(e,n,t[n]);return e},ht=(e,t)=>zo(e,Yo(t));function Zo(e,t){for(let n=e.length-1;n>=0;n--){const r=e[n];if(r.type===E.Meta&&r.timestamp<=t)return e.slice(n)}return e}function Ko(e,{getCastFn:t,applyEventsSynchronously:n,emitter:r}){const o=Mn({id:"player",context:e,initial:"paused",states:{playing:{on:{PAUSE:{target:"paused",actions:["pause"]},CAST_EVENT:{target:"playing",actions:"castEvent"},END:{target:"paused",actions:["resetLastPlayedEvent","pause"]},ADD_EVENT:{target:"playing",actions:["addEvent"]}}},paused:{on:{PLAY:{target:"playing",actions:["recordTimeOffset","play"]},CAST_EVENT:{target:"paused",actions:"castEvent"},TO_LIVE:{target:"live",actions:["startLive"]},ADD_EVENT:{target:"paused",actions:["addEvent"]}}},live:{on:{ADD_EVENT:{target:"live",actions:["addEvent"]},CAST_EVENT:{target:"live",actions:["castEvent"]}}}}},{actions:{castEvent:Ce({lastPlayedEvent:(i,c)=>c.type==="CAST_EVENT"?c.payload.event:i.lastPlayedEvent}),recordTimeOffset:Ce((i,c)=>{let a=i.timeOffset;return"payload"in c&&"timeOffset"in c.payload&&(a=c.payload.timeOffset),ht(dt({},i),{timeOffset:a,baselineTime:i.events[0].timestamp+a})}),play(i){var c;const{timer:a,events:l,baselineTime:s,lastPlayedEvent:u}=i;a.clear();for(const y of l)Sn(y,s);const d=Zo(l,s);let m=u?.timestamp;u?.type===E.IncrementalSnapshot&&u.data.source===I.MouseMove&&(m=u.timestamp+((c=u.data.positions[0])==null?void 0:c.timeOffset)),s<(m||0)&&r.emit(D.PlayBack);const h=new Array,f=new Array;for(const y of d)if(!(m&&m<s&&(y.timestamp<=m||y===u)))if(y.timestamp<s)h.push(y);else{const S=t(y,!1);f.push({doAction:()=>{S()},delay:y.delay})}n(h),r.emit(D.Flush),a.addActions(f),a.start()},pause(i){i.timer.clear()},resetLastPlayedEvent:Ce(i=>ht(dt({},i),{lastPlayedEvent:null})),startLive:Ce({baselineTime:(i,c)=>(i.timer.toggleLiveMode(!0),i.timer.start(),c.type==="TO_LIVE"&&c.payload.baselineTime?c.payload.baselineTime:Date.now())}),addEvent:Ce((i,c)=>{const{baselineTime:a,timer:l,events:s}=i;if(c.type==="ADD_EVENT"){const{event:u}=c.payload;Sn(u,a);let d=s.length-1;if(!s[d]||s[d].timestamp<=u.timestamp)s.push(u);else{let f=-1,y=0;for(;y<=d;){const S=Math.floor((y+d)/2);s[S].timestamp<=u.timestamp?y=S+1:d=S-1}f===-1&&(f=y),s.splice(f,0,u)}const m=u.timestamp<a,h=t(u,m);m?h():l.isActive()&&l.addAction({doAction:()=>{h()},delay:u.delay})}return ht(dt({},i),{events:s})})}});return Dn(o)}function Qo(e){const t=Mn({id:"speed",context:e,initial:"normal",states:{normal:{on:{FAST_FORWARD:{target:"skipping",actions:["recordSpeed","setSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}},skipping:{on:{BACK_TO_NORMAL:{target:"normal",actions:["restoreSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}}}},{actions:{setSpeed:(n,r)=>{"payload"in r&&n.timer.setSpeed(r.payload.speed)},recordSpeed:Ce({normalSpeed:n=>n.timer.speed}),restoreSpeed:n=>{n.timer.setSpeed(n.normalSpeed)}}});return Dn(t)}const Jo=e=>[`.${e} { background: currentColor }`,"noscript { display: none !important; }"];var qo=(e,t,n)=>new Promise((r,o)=>{var i=l=>{try{a(n.next(l))}catch(s){o(s)}},c=l=>{try{a(n.throw(l))}catch(s){o(s)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,c);a((n=n.apply(e,t)).next())});const On=new Map;function An(e,t){let n=On.get(e);return n||(n=new Map,On.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}function de(e,t,n){return r=>qo(this,null,function*(){if(r&&typeof r=="object"&&"rr_type"in r)if(n&&(n.isUnchanged=!1),r.rr_type==="ImageBitmap"&&"args"in r){const o=yield de(e,t,n)(r.args);return yield createImageBitmap.apply(null,o)}else if("index"in r){if(n||t===null)return r;const{rr_type:o,index:i}=r;return An(t,o)[i]}else if("args"in r){const{rr_type:o,args:i}=r,c=window[o];return new c(...yield Promise.all(i.map(de(e,t,n))))}else{if("base64"in r)return Zr(r.base64);if("src"in r){const o=e.get(r.src);if(o)return o;{const i=new Image;return i.src=r.src,e.set(r.src,i),i}}else if("data"in r&&r.rr_type==="Blob"){const o=yield Promise.all(r.data.map(de(e,t,n)));return new Blob(o,{type:r.type})}}else if(Array.isArray(r))return yield Promise.all(r.map(de(e,t,n)));return r})}var es=(e,t,n)=>new Promise((r,o)=>{var i=l=>{try{a(n.next(l))}catch(s){o(s)}},c=l=>{try{a(n.throw(l))}catch(s){o(s)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,c);a((n=n.apply(e,t)).next())});function ts(e,t){try{return t===ue.WebGL?e.getContext("webgl")||e.getContext("experimental-webgl"):e.getContext("webgl2")}catch{return null}}const ns=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject"];function rs(e,t){if(!(t!=null&&t.constructor))return;const{name:n}=t.constructor;if(!ns.includes(n))return;const r=An(e,n);r.includes(t)||r.push(t)}function os(e){return es(this,arguments,function*({mutation:t,target:n,type:r,imageMap:o,errorHandler:i}){try{const c=ts(n,r);if(!c)return;if(t.setter){c[t.property]=t.args[0];return}const a=c[t.property],l=yield Promise.all(t.args.map(de(o,c))),s=a.apply(c,l);rs(c,s)}catch(c){i(t,c)}})}var ss=(e,t,n)=>new Promise((r,o)=>{var i=l=>{try{a(n.next(l))}catch(s){o(s)}},c=l=>{try{a(n.throw(l))}catch(s){o(s)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,c);a((n=n.apply(e,t)).next())});function is(e){return ss(this,arguments,function*({event:t,mutation:n,target:r,imageMap:o,errorHandler:i}){try{const c=r.getContext("2d");if(n.setter){c[n.property]=n.args[0];return}const a=c[n.property];if(n.property==="drawImage"&&typeof n.args[0]=="string")o.get(t),a.apply(c,n.args);else{const l=yield Promise.all(n.args.map(de(o,c)));a.apply(c,l)}}catch(c){i(n,c)}})}var as=(e,t,n)=>new Promise((r,o)=>{var i=l=>{try{a(n.next(l))}catch(s){o(s)}},c=l=>{try{a(n.throw(l))}catch(s){o(s)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,c);a((n=n.apply(e,t)).next())});function Ln(e){return as(this,arguments,function*({event:t,mutation:n,target:r,imageMap:o,canvasEventMap:i,errorHandler:c}){try{const a=i.get(t)||n,l="commands"in a?a.commands:[a];if([ue.WebGL,ue.WebGL2].includes(n.type)){for(let s=0;s<l.length;s++){const u=l[s];yield os({mutation:u,type:n.type,target:r,imageMap:o,errorHandler:c})}return}for(let s=0;s<l.length;s++){const u=l[s];yield is({event:t,mutation:u,target:r,imageMap:o,errorHandler:c})}}catch(a){c(n,a)}})}var ls=Object.defineProperty,cs=Object.defineProperties,us=Object.getOwnPropertyDescriptors,Fn=Object.getOwnPropertySymbols,ds=Object.prototype.hasOwnProperty,hs=Object.prototype.propertyIsEnumerable,_n=(e,t,n)=>t in e?ls(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ie=(e,t)=>{for(var n in t||(t={}))ds.call(t,n)&&_n(e,n,t[n]);if(Fn)for(var n of Fn(t))hs.call(t,n)&&_n(e,n,t[n]);return e},mt=(e,t)=>cs(e,us(t)),pt=(e,t,n)=>new Promise((r,o)=>{var i=l=>{try{a(n.next(l))}catch(s){o(s)}},c=l=>{try{a(n.throw(l))}catch(s){o(s)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,c);a((n=n.apply(e,t)).next())});const ms=10*1e3,ps=5*1e3,fs=bn||Uo,ft="[replayer]",yt={duration:500,lineCap:"round",lineWidth:3,strokeStyle:"red"};function Pn(e){return e.type==E.IncrementalSnapshot&&(e.data.source==I.TouchMove||e.data.source==I.MouseInteraction&&e.data.type==B.TouchStart)}class ys{constructor(t,n){if(this.usingVirtualDom=!1,this.virtualDom=new Te,this.mouseTail=null,this.tailPositions=[],this.emitter=fs(),this.legacy_missingNodeRetryMap={},this.cache=xt(),this.imageMap=new Map,this.canvasEventMap=new Map,this.mirror=bt(),this.firstFullSnapshot=null,this.newDocumentQueue=[],this.mousePos=null,this.touchActive=null,this.handleResize=a=>{this.iframe.style.display="inherit";for(const l of[this.mouseTail,this.iframe])!l||(l.setAttribute("width",String(a.width)),l.setAttribute("height",String(a.height)))},this.applyEventsSynchronously=a=>{for(const l of a){switch(l.type){case E.DomContentLoaded:case E.Load:case E.Custom:continue;case E.FullSnapshot:case E.Meta:case E.Plugin:case E.IncrementalSnapshot:break}this.getCastFn(l,!0)()}this.touchActive===!0?this.mouse.classList.add("touch-active"):this.touchActive===!1&&this.mouse.classList.remove("touch-active"),this.touchActive=null},this.getCastFn=(a,l=!1)=>{let s;switch(a.type){case E.DomContentLoaded:case E.Load:break;case E.Custom:s=()=>{this.emitter.emit(D.CustomEvent,a)};break;case E.Meta:s=()=>this.emitter.emit(D.Resize,{width:a.data.width,height:a.data.height});break;case E.FullSnapshot:s=()=>{if(this.firstFullSnapshot){if(this.firstFullSnapshot===a){this.firstFullSnapshot=!0;return}}else this.firstFullSnapshot=!0;this.rebuildFullSnapshot(a,l),this.iframe.contentWindow.scrollTo(a.data.initialOffset)};break;case E.IncrementalSnapshot:s=()=>{if(this.applyIncremental(a,l),!l&&(a===this.nextUserInteractionEvent&&(this.nextUserInteractionEvent=null,this.backToNormal()),this.config.skipInactive&&!this.nextUserInteractionEvent)){for(const u of this.service.state.context.events)if(!(u.timestamp<=a.timestamp)&&this.isUserInteraction(u)){u.delay-a.delay>ms*this.speedService.state.context.timer.speed&&(this.nextUserInteractionEvent=u);break}if(this.nextUserInteractionEvent){const u=this.nextUserInteractionEvent.delay-a.delay,d={speed:Math.min(Math.round(u/ps),this.config.maxSpeed)};this.speedService.send({type:"FAST_FORWARD",payload:d}),this.emitter.emit(D.SkipStart,d)}}};break}return()=>{s&&s();for(const d of this.config.plugins||[])d.handler(a,l,{replayer:this});this.service.send({type:"CAST_EVENT",payload:{event:a}});const u=this.service.state.context.events.length-1;if(a===this.service.state.context.events[u]){const d=()=>{u<this.service.state.context.events.length-1||(this.backToNormal(),this.service.send("END"),this.emitter.emit(D.Finish))};a.type===E.IncrementalSnapshot&&a.data.source===I.MouseMove&&a.data.positions.length?setTimeout(()=>{d()},Math.max(0,-a.data.positions[0].timeOffset+50)):d()}this.emitter.emit(D.EventCast,a)}},!(n!=null&&n.liveMode)&&t.length<2)throw new Error("Replayer need at least 2 events.");const r={speed:1,maxSpeed:360,root:document.body,loadTimeout:0,skipInactive:!1,showWarning:!0,showDebug:!1,blockClass:"rr-block",liveMode:!1,insertStyleRules:[],triggerFocus:!0,UNSAFE_replayCanvas:!1,pauseAnimation:!0,mouseTail:yt,useVirtualDom:!0};this.config=Object.assign({},r,n),this.handleResize=this.handleResize.bind(this),this.getCastFn=this.getCastFn.bind(this),this.applyEventsSynchronously=this.applyEventsSynchronously.bind(this),this.emitter.on(D.Resize,this.handleResize),this.setupDom(),this.emitter.on(D.Flush,()=>{if(this.usingVirtualDom){const a={mirror:this.mirror,applyCanvas:(l,s,u)=>{Ln({event:l,mutation:s,target:u,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})},applyInput:this.applyInput.bind(this),applyScroll:this.applyScroll.bind(this)};if(ae(this.iframe.contentDocument,this.virtualDom,a,this.virtualDom.mirror),this.virtualDom.destroyTree(),this.usingVirtualDom=!1,Object.keys(this.legacy_missingNodeRetryMap).length)for(const l in this.legacy_missingNodeRetryMap)try{const s=this.legacy_missingNodeRetryMap[l],u=ct(s.node,this.mirror,this.virtualDom.mirror);ae(u,s.node,a,this.virtualDom.mirror),s.node=u}catch(s){this.config.showWarning&&console.warn(s)}}this.mousePos&&this.moveAndHover(this.mousePos.x,this.mousePos.y,this.mousePos.id,!0,this.mousePos.debugData),this.mousePos=null}),this.emitter.on(D.PlayBack,()=>{this.firstFullSnapshot=null,this.mirror.reset()});const o=new Bo([],n?.speed||r.speed);this.service=Ko({events:t.map(a=>n&&n.unpackFn?n.unpackFn(a):a).sort((a,l)=>a.timestamp-l.timestamp),timer:o,timeOffset:0,baselineTime:0,lastPlayedEvent:null},{getCastFn:this.getCastFn,applyEventsSynchronously:this.applyEventsSynchronously,emitter:this.emitter}),this.service.start(),this.service.subscribe(a=>{this.emitter.emit(D.StateChange,{player:a})}),this.speedService=Qo({normalSpeed:-1,timer:o}),this.speedService.start(),this.speedService.subscribe(a=>{this.emitter.emit(D.StateChange,{speed:a})});const i=this.service.state.context.events.find(a=>a.type===E.Meta),c=this.service.state.context.events.find(a=>a.type===E.FullSnapshot);if(i){const{width:a,height:l}=i.data;setTimeout(()=>{this.emitter.emit(D.Resize,{width:a,height:l})},0)}c&&setTimeout(()=>{this.firstFullSnapshot||(this.firstFullSnapshot=c,this.rebuildFullSnapshot(c),this.iframe.contentWindow.scrollTo(c.data.initialOffset))},1),this.service.state.context.events.find(Pn)&&this.mouse.classList.add("touch-device")}get timer(){return this.service.state.context.timer}on(t,n){return this.emitter.on(t,n),this}off(t,n){return this.emitter.off(t,n),this}setConfig(t){Object.keys(t).forEach(n=>{t[n],this.config[n]=t[n]}),this.config.skipInactive||this.backToNormal(),typeof t.speed<"u"&&this.speedService.send({type:"SET_SPEED",payload:{speed:t.speed}}),typeof t.mouseTail<"u"&&(t.mouseTail===!1?this.mouseTail&&(this.mouseTail.style.display="none"):(this.mouseTail||(this.mouseTail=document.createElement("canvas"),this.mouseTail.width=Number.parseFloat(this.iframe.width),this.mouseTail.height=Number.parseFloat(this.iframe.height),this.mouseTail.classList.add("replayer-mouse-tail"),this.wrapper.insertBefore(this.mouseTail,this.iframe)),this.mouseTail.style.display="inherit"))}getMetaData(){const t=this.service.state.context.events[0],n=this.service.state.context.events[this.service.state.context.events.length-1];return{startTime:t.timestamp,endTime:n.timestamp,totalTime:n.timestamp-t.timestamp}}getCurrentTime(){return this.timer.timeOffset+this.getTimeOffset()}getTimeOffset(){const{baselineTime:t,events:n}=this.service.state.context;return t-n[0].timestamp}getMirror(){return this.mirror}play(t=0){var n,r;this.service.state.matches("paused")?this.service.send({type:"PLAY",payload:{timeOffset:t}}):(this.service.send({type:"PAUSE"}),this.service.send({type:"PLAY",payload:{timeOffset:t}})),(r=(n=this.iframe.contentDocument)==null?void 0:n.getElementsByTagName("html")[0])==null||r.classList.remove("rrweb-paused"),this.emitter.emit(D.Start)}pause(t){var n,r;t===void 0&&this.service.state.matches("playing")&&this.service.send({type:"PAUSE"}),typeof t=="number"&&(this.play(t),this.service.send({type:"PAUSE"})),(r=(n=this.iframe.contentDocument)==null?void 0:n.getElementsByTagName("html")[0])==null||r.classList.add("rrweb-paused"),this.emitter.emit(D.Pause)}resume(t=0){console.warn("The 'resume' will be departed in 1.0. Please use 'play' method which has the same interface."),this.play(t),this.emitter.emit(D.Resume)}startLive(t){this.service.send({type:"TO_LIVE",payload:{baselineTime:t}})}addEvent(t){const n=this.config.unpackFn?this.config.unpackFn(t):t;Pn(n)&&this.mouse.classList.add("touch-device"),Promise.resolve().then(()=>this.service.send({type:"ADD_EVENT",payload:{event:n}}))}enableInteract(){this.iframe.setAttribute("scrolling","auto"),this.iframe.style.pointerEvents="auto"}disableInteract(){this.iframe.setAttribute("scrolling","no"),this.iframe.style.pointerEvents="none"}resetCache(){this.cache=xt()}setupDom(){this.wrapper=document.createElement("div"),this.wrapper.classList.add("replayer-wrapper"),this.config.root.appendChild(this.wrapper),this.mouse=document.createElement("div"),this.mouse.classList.add("replayer-mouse"),this.wrapper.appendChild(this.mouse),this.config.mouseTail!==!1&&(this.mouseTail=document.createElement("canvas"),this.mouseTail.classList.add("replayer-mouse-tail"),this.mouseTail.style.display="inherit",this.wrapper.appendChild(this.mouseTail)),this.iframe=document.createElement("iframe");const t=["allow-same-origin"];this.config.UNSAFE_replayCanvas&&t.push("allow-scripts"),this.iframe.style.display="none",this.iframe.setAttribute("sandbox",t.join(" ")),this.disableInteract(),this.wrapper.appendChild(this.iframe),this.iframe.contentWindow&&this.iframe.contentDocument&&(jo(this.iframe.contentWindow,this.iframe.contentDocument),tt(this.iframe.contentWindow))}rebuildFullSnapshot(t,n=!1){if(!this.iframe.contentDocument)return console.warn("Looks like your replayer has been destroyed.");Object.keys(this.legacy_missingNodeRetryMap).length&&console.warn("Found unresolved missing node map",this.legacy_missingNodeRetryMap),this.legacy_missingNodeRetryMap={};const r=[];Sr(t.data.node,{doc:this.iframe.contentDocument,afterAppend:c=>{this.collectIframeAndAttachDocument(r,c)},cache:this.cache,mirror:this.mirror});for(const{mutationInQueue:c,builtNode:a}of r)this.attachDocumentToIframe(c,a),this.newDocumentQueue=this.newDocumentQueue.filter(l=>l!==c);const{documentElement:o,head:i}=this.iframe.contentDocument;this.insertStyleRules(o,i),this.service.state.matches("playing")||this.iframe.contentDocument.getElementsByTagName("html")[0].classList.add("rrweb-paused"),this.emitter.emit(D.FullsnapshotRebuilded,t),n||this.waitForStylesheetLoad(),this.config.UNSAFE_replayCanvas&&this.preloadAllImages()}insertStyleRules(t,n){const r=Jo(this.config.blockClass).concat(this.config.insertStyleRules);if(this.config.pauseAnimation&&r.push("html.rrweb-paused *, html.rrweb-paused *:before, html.rrweb-paused *:after { animation-play-state: paused !important; }"),this.usingVirtualDom){const o=this.virtualDom.createElement("style");this.virtualDom.mirror.add(o,vn(o,this.virtualDom.unserializedId)),t.insertBefore(o,n);for(let i=0;i<r.length;i++)o.rules.push({cssText:r[i],type:oe.Insert,index:i})}else{const o=document.createElement("style");t.insertBefore(o,n);for(let i=0;i<r.length;i++)o.sheet.insertRule(r[i],i)}}attachDocumentToIframe(t,n){const r=this.usingVirtualDom?this.virtualDom.mirror:this.mirror,o=[];Ve(t.node,{doc:n.contentDocument,mirror:r,hackCss:!0,skipChild:!1,afterAppend:i=>{this.collectIframeAndAttachDocument(o,i);const c=r.getMeta(i);if(c?.type===M.Element&&c?.tagName.toUpperCase()==="HTML"){const{documentElement:a,head:l}=n.contentDocument;this.insertStyleRules(a,l)}},cache:this.cache});for(const{mutationInQueue:i,builtNode:c}of o)this.attachDocumentToIframe(i,c),this.newDocumentQueue=this.newDocumentQueue.filter(a=>a!==i)}collectIframeAndAttachDocument(t,n){if(Se(n,this.mirror)){const r=this.newDocumentQueue.find(o=>o.parentId===this.mirror.getId(n));r&&t.push({mutationInQueue:r,builtNode:n})}}waitForStylesheetLoad(){var t;const n=(t=this.iframe.contentDocument)==null?void 0:t.head;if(n){const r=new Set;let o,i=this.service.state;const c=()=>{i=this.service.state};this.emitter.on(D.Start,c),this.emitter.on(D.Pause,c);const a=()=>{this.emitter.off(D.Start,c),this.emitter.off(D.Pause,c)};n.querySelectorAll('link[rel="stylesheet"]').forEach(l=>{l.sheet||(r.add(l),l.addEventListener("load",()=>{r.delete(l),r.size===0&&o!==-1&&(i.matches("playing")&&this.play(this.getCurrentTime()),this.emitter.emit(D.LoadStylesheetEnd),o&&clearTimeout(o),a())}))}),r.size>0&&(this.service.send({type:"PAUSE"}),this.emitter.emit(D.LoadStylesheetStart),o=setTimeout(()=>{i.matches("playing")&&this.play(this.getCurrentTime()),o=-1,a()},this.config.loadTimeout))}}preloadAllImages(){return pt(this,null,function*(){this.service.state;const t=()=>{this.service.state};this.emitter.on(D.Start,t),this.emitter.on(D.Pause,t);const n=[];for(const r of this.service.state.context.events)r.type===E.IncrementalSnapshot&&r.data.source===I.CanvasMutation&&(n.push(this.deserializeAndPreloadCanvasEvents(r.data,r)),("commands"in r.data?r.data.commands:[r.data]).forEach(o=>{this.preloadImages(o,r)}));return Promise.all(n)})}preloadImages(t,n){if(t.property==="drawImage"&&typeof t.args[0]=="string"&&!this.imageMap.has(n)){const r=document.createElement("canvas"),o=r.getContext("2d"),i=o?.createImageData(r.width,r.height);i?.data,JSON.parse(t.args[0]),o?.putImageData(i,0,0)}}deserializeAndPreloadCanvasEvents(t,n){return pt(this,null,function*(){if(!this.canvasEventMap.has(n)){const r={isUnchanged:!0};if("commands"in t){const o=yield Promise.all(t.commands.map(i=>pt(this,null,function*(){const c=yield Promise.all(i.args.map(de(this.imageMap,null,r)));return mt(Ie({},i),{args:c})})));r.isUnchanged===!1&&this.canvasEventMap.set(n,mt(Ie({},t),{commands:o}))}else{const o=yield Promise.all(t.args.map(de(this.imageMap,null,r)));r.isUnchanged===!1&&this.canvasEventMap.set(n,mt(Ie({},t),{args:o}))}}})}applyIncremental(t,n){var r,o,i,c,a,l;const{data:s}=t;switch(s.source){case I.Mutation:{try{this.applyMutation(s,n)}catch(u){this.warn(`Exception in mutation ${u.message||u}`,s)}break}case I.Drag:case I.TouchMove:case I.MouseMove:if(n){const u=s.positions[s.positions.length-1];this.mousePos={x:u.x,y:u.y,id:u.id,debugData:s}}else s.positions.forEach(u=>{const d={doAction:()=>{this.moveAndHover(u.x,u.y,u.id,n,s)},delay:u.timeOffset+t.timestamp-this.service.state.context.baselineTime};this.timer.addAction(d)}),this.timer.addAction({doAction(){},delay:t.delay-((r=s.positions[0])==null?void 0:r.timeOffset)});break;case I.MouseInteraction:{if(s.id===-1||n)break;const u=new Event(B[s.type].toLowerCase()),d=this.mirror.getNode(s.id);if(!d)return this.debugNodeNotFound(s,s.id);this.emitter.emit(D.MouseInteraction,{type:s.type,target:d});const{triggerFocus:m}=this.config;switch(s.type){case B.Blur:"blur"in d&&d.blur();break;case B.Focus:m&&d.focus&&d.focus({preventScroll:!0});break;case B.Click:case B.TouchStart:case B.TouchEnd:n?(s.type===B.TouchStart?this.touchActive=!0:s.type===B.TouchEnd&&(this.touchActive=!1),this.mousePos={x:s.x,y:s.y,id:s.id,debugData:s}):(s.type===B.TouchStart&&(this.tailPositions.length=0),this.moveAndHover(s.x,s.y,s.id,n,s),s.type===B.Click?(this.mouse.classList.remove("active"),this.mouse.offsetWidth,this.mouse.classList.add("active")):s.type===B.TouchStart?(this.mouse.offsetWidth,this.mouse.classList.add("touch-active")):s.type===B.TouchEnd&&this.mouse.classList.remove("touch-active"));break;case B.TouchCancel:n?this.touchActive=!1:this.mouse.classList.remove("touch-active");break;default:d.dispatchEvent(u)}break}case I.Scroll:{if(s.id===-1)break;if(this.usingVirtualDom){const u=this.virtualDom.mirror.getNode(s.id);if(!u)return this.debugNodeNotFound(s,s.id);u.scrollData=s;break}this.applyScroll(s,n);break}case I.ViewportResize:this.emitter.emit(D.Resize,{width:s.width,height:s.height});break;case I.Input:{if(s.id===-1)break;if(this.usingVirtualDom){const u=this.virtualDom.mirror.getNode(s.id);if(!u)return this.debugNodeNotFound(s,s.id);u.inputData=s;break}this.applyInput(s);break}case I.MediaInteraction:{const u=this.usingVirtualDom?this.virtualDom.mirror.getNode(s.id):this.mirror.getNode(s.id);if(!u)return this.debugNodeNotFound(s,s.id);const d=u;try{s.currentTime&&(d.currentTime=s.currentTime),s.volume&&(d.volume=s.volume),s.muted&&(d.muted=s.muted),s.type===me.Pause&&d.pause(),s.type===me.Play&&d.play()}catch(m){this.config.showWarning&&console.warn(`Failed to replay media interactions: ${m.message||m}`)}break}case I.StyleSheetRule:{if(this.usingVirtualDom){const u=this.virtualDom.mirror.getNode(s.id);if(!u)return this.debugNodeNotFound(s,s.id);const d=u.rules;(o=s.adds)==null||o.forEach(({rule:m,index:h})=>d?.push({cssText:m,index:h,type:oe.Insert})),(i=s.removes)==null||i.forEach(({index:m})=>d?.push({index:m,type:oe.Remove}))}else{const u=this.mirror.getNode(s.id);if(!u)return this.debugNodeNotFound(s,s.id);const d=u.sheet;(c=s.adds)==null||c.forEach(({rule:m,index:h})=>{try{if(Array.isArray(h)){const{positions:f,index:y}=st(h);we(d.cssRules,f).insertRule(m,y)}else{const f=h===void 0?void 0:Math.min(h,d.cssRules.length);d.insertRule(m,f)}}catch{}}),(a=s.removes)==null||a.forEach(({index:m})=>{try{if(Array.isArray(m)){const{positions:h,index:f}=st(m);we(d.cssRules,h).deleteRule(f||0)}else d?.deleteRule(m)}catch{}})}break}case I.StyleDeclaration:{if(this.usingVirtualDom){const u=this.virtualDom.mirror.getNode(s.id);if(!u)return this.debugNodeNotFound(s,s.id);const d=u.rules;s.set&&d.push(Ie({type:oe.SetProperty,index:s.index},s.set)),s.remove&&d.push(Ie({type:oe.RemoveProperty,index:s.index},s.remove))}else{const u=this.mirror.getNode(s.id);if(!u)return this.debugNodeNotFound(s,s.id);const d=u.sheet;s.set&&we(d.rules,s.index).style.setProperty(s.set.property,s.set.value,s.set.priority),s.remove&&we(d.rules,s.index).style.removeProperty(s.remove.property)}break}case I.CanvasMutation:{if(!this.config.UNSAFE_replayCanvas)return;if(this.usingVirtualDom){const u=this.virtualDom.mirror.getNode(s.id);if(!u)return this.debugNodeNotFound(s,s.id);u.canvasMutations.push({event:t,mutation:s})}else{const u=this.mirror.getNode(s.id);if(!u)return this.debugNodeNotFound(s,s.id);Ln({event:t,mutation:s,target:u,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})}break}case I.Font:{try{const u=new FontFace(s.family,s.buffer?new Uint8Array(JSON.parse(s.fontSource)):s.fontSource,s.descriptors);(l=this.iframe.contentDocument)==null||l.fonts.add(u)}catch(u){this.config.showWarning&&console.warn(u)}break}}}applyMutation(t,n){if(this.config.useVirtualDom&&!this.usingVirtualDom&&n&&(this.usingVirtualDom=!0,Wo(this.iframe.contentDocument,this.mirror,this.virtualDom),Object.keys(this.legacy_missingNodeRetryMap).length))for(const s in this.legacy_missingNodeRetryMap)try{const u=this.legacy_missingNodeRetryMap[s],d=gn(u.node,this.virtualDom,this.mirror);d&&(u.node=d)}catch(u){this.config.showWarning&&console.warn(u)}const r=this.usingVirtualDom?this.virtualDom.mirror:this.mirror;t.removes.forEach(s=>{var u;const d=r.getNode(s.id);if(!d)return t.removes.find(h=>h.id===s.parentId)?void 0:this.warnNodeNotFound(t,s.id);let m=r.getNode(s.parentId);if(!m)return this.warnNodeNotFound(t,s.parentId);if(s.isShadow&&Re(m)&&(m=m.shadowRoot),r.removeNodeFromMap(d),m)try{m.removeChild(d),this.usingVirtualDom&&d.nodeName==="#text"&&m.nodeName==="STYLE"&&((u=m.rules)==null?void 0:u.length)>0&&(m.rules=[])}catch(h){if(h instanceof DOMException)this.warn("parent could not remove child in mutation",m,d,t);else throw h}});const o=Ie({},this.legacy_missingNodeRetryMap),i=[],c=s=>{let u=null;return s.nextId&&(u=r.getNode(s.nextId)),s.nextId!==null&&s.nextId!==void 0&&s.nextId!==-1&&!u},a=s=>{var u;if(!this.iframe.contentDocument)return console.warn("Looks like your replayer has been destroyed.");let d=r.getNode(s.parentId);if(!d)return s.node.type===M.Document?this.newDocumentQueue.push(s):i.push(s);s.node.isShadow&&(Re(d)||d.attachShadow({mode:"open"}),d=d.shadowRoot);let m=null,h=null;if(s.previousId&&(m=r.getNode(s.previousId)),s.nextId&&(h=r.getNode(s.nextId)),c(s))return i.push(s);if(s.node.rootId&&!r.getNode(s.node.rootId))return;const f=s.node.rootId?r.getNode(s.node.rootId):this.usingVirtualDom?this.virtualDom:this.iframe.contentDocument;if(Se(d,r)){this.attachDocumentToIframe(s,d);return}const y=Ve(s.node,{doc:f,mirror:r,skipChild:!0,hackCss:!0,cache:this.cache});if(s.previousId===-1||s.nextId===-1){o[s.node.id]={node:y,mutation:s};return}const S=r.getMeta(d);if(S&&S.type===M.Element&&S.tagName==="textarea"&&s.node.type===M.Text){const p=Array.isArray(d.childNodes)?d.childNodes:Array.from(d.childNodes);for(const b of p)b.nodeType===d.TEXT_NODE&&d.removeChild(b)}if(m&&m.nextSibling&&m.nextSibling.parentNode)d.insertBefore(y,m.nextSibling);else if(h&&h.parentNode)d.contains(h)?d.insertBefore(y,h):d.insertBefore(y,null);else{if(d===f)for(;f.firstChild;)f.removeChild(f.firstChild);d.appendChild(y)}if(this.usingVirtualDom&&y.nodeName==="#text"&&d.nodeName==="STYLE"&&((u=d.rules)==null?void 0:u.length)>0&&(d.rules=[]),Se(y,this.mirror)){const p=this.mirror.getId(y),b=this.newDocumentQueue.find(v=>v.parentId===p);b&&(this.attachDocumentToIframe(b,y),this.newDocumentQueue=this.newDocumentQueue.filter(v=>v!==b))}(s.previousId||s.nextId)&&this.legacy_resolveMissingNode(o,d,y,s)};t.adds.forEach(s=>{a(s)});const l=Date.now();for(;i.length;){const s=kt(i);if(i.length=0,Date.now()-l>500){this.warn("Timeout in the loop, please check the resolve tree data:",s);break}for(const u of s)r.getNode(u.value.parentId)?nt(u,d=>{a(d)}):this.debug("Drop resolve tree since there is no parent for the root node.",u)}Object.keys(o).length&&Object.assign(this.legacy_missingNodeRetryMap,o),Rt(t.texts).forEach(s=>{var u;const d=r.getNode(s.id);if(!d)return t.removes.find(m=>m.id===s.id)?void 0:this.warnNodeNotFound(t,s.id);if(d.textContent=s.value,this.usingVirtualDom){const m=d.parentNode;((u=m?.rules)==null?void 0:u.length)>0&&(m.rules=[])}}),t.attributes.forEach(s=>{const u=r.getNode(s.id);if(!u)return t.removes.find(d=>d.id===s.id)?void 0:this.warnNodeNotFound(t,s.id);for(const d in s.attributes)if(typeof d=="string"){const m=s.attributes[d];if(m===null)u.removeAttribute(d);else if(typeof m=="string")try{u.setAttribute(d,m)}catch(h){this.config.showWarning&&console.warn("An error occurred may due to the checkout feature.",h)}else if(d==="style"){const h=m,f=u;for(const y in h)if(h[y]===!1)f.style.removeProperty(y);else if(h[y]instanceof Array){const S=h[y];f.style.setProperty(y,S[0],S[1])}else{const S=h[y];f.style.setProperty(y,S)}}}})}applyScroll(t,n){const r=this.mirror.getNode(t.id);if(!r)return this.debugNodeNotFound(t,t.id);const o=this.mirror.getMeta(r);if(r===this.iframe.contentDocument)this.iframe.contentWindow.scrollTo({top:t.y,left:t.x,behavior:n?"auto":"smooth"});else if(o?.type===M.Document)r.defaultView.scrollTo({top:t.y,left:t.x,behavior:n?"auto":"smooth"});else try{r.scrollTop=t.y,r.scrollLeft=t.x}catch{}}applyInput(t){const n=this.mirror.getNode(t.id);if(!n)return this.debugNodeNotFound(t,t.id);try{n.checked=t.isChecked,n.value=t.text}catch{}}legacy_resolveMissingNode(t,n,r,o){const{previousId:i,nextId:c}=o,a=i&&t[i],l=c&&t[c];if(a){const{node:s,mutation:u}=a;n.insertBefore(s,r),delete t[u.node.id],delete this.legacy_missingNodeRetryMap[u.node.id],(u.previousId||u.nextId)&&this.legacy_resolveMissingNode(t,n,s,u)}if(l){const{node:s,mutation:u}=l;n.insertBefore(s,r.nextSibling),delete t[u.node.id],delete this.legacy_missingNodeRetryMap[u.node.id],(u.previousId||u.nextId)&&this.legacy_resolveMissingNode(t,n,s,u)}}moveAndHover(t,n,r,o,i){const c=this.mirror.getNode(r);if(!c)return this.debugNodeNotFound(i,r);const a=ot(c,this.iframe),l=t*a.absoluteScale+a.x,s=n*a.absoluteScale+a.y;this.mouse.style.left=`${l}px`,this.mouse.style.top=`${s}px`,o||this.drawMouseTail({x:l,y:s}),this.hoverElements(c)}drawMouseTail(t){if(!this.mouseTail)return;const{lineCap:n,lineWidth:r,strokeStyle:o,duration:i}=this.config.mouseTail===!0?yt:Object.assign({},yt,this.config.mouseTail),c=()=>{if(!this.mouseTail)return;const a=this.mouseTail.getContext("2d");!a||!this.tailPositions.length||(a.clearRect(0,0,this.mouseTail.width,this.mouseTail.height),a.beginPath(),a.lineWidth=r,a.lineCap=n,a.strokeStyle=o,a.moveTo(this.tailPositions[0].x,this.tailPositions[0].y),this.tailPositions.forEach(l=>a.lineTo(l.x,l.y)),a.stroke())};this.tailPositions.push(t),c(),setTimeout(()=>{this.tailPositions=this.tailPositions.filter(a=>a!==t),c()},i/this.speedService.state.context.timer.speed)}hoverElements(t){var n;(n=this.iframe.contentDocument)==null||n.querySelectorAll(".\\:hover").forEach(o=>{o.classList.remove(":hover")});let r=t;for(;r;)r.classList&&r.classList.add(":hover"),r=r.parentElement}isUserInteraction(t){return t.type!==E.IncrementalSnapshot?!1:t.data.source>I.Mutation&&t.data.source<=I.Input}backToNormal(){this.nextUserInteractionEvent=null,!this.speedService.state.matches("normal")&&(this.speedService.send({type:"BACK_TO_NORMAL"}),this.emitter.emit(D.SkipEnd,{speed:this.speedService.state.context.normalSpeed}))}warnNodeNotFound(t,n){this.warn(`Node with id '${n}' not found. `,t)}warnCanvasMutationFailed(t,n){this.warn("Has error on canvas update",n,"canvas mutation:",t)}debugNodeNotFound(t,n){this.debug(ft,`Node with id '${n}' not found. `,t)}warn(...t){!this.config.showWarning||console.warn(ft,...t)}debug(...t){!this.config.showDebug||console.log(ft,...t)}}const{addCustomEvent:gs}=fe,{freezePage:vs}=fe;return J.EventType=E,J.IncrementalSource=I,J.MouseInteractions=B,J.Replayer=ys,J.ReplayerEvents=D,J.addCustomEvent=gs,J.freezePage=vs,J.record=fe,J.utils=wr,Object.defineProperty(J,"__esModule",{value:!0}),J}({});
//# sourceMappingURL=rrweb.min.js.map
